# clang tool in chromium

## chromium docs [Clang Tool Refactoring](https://chromium.googlesource.com/chromium/src/+/HEAD/docs/clang_tool_refactoring.md)	

> NOTE: 
>
> 一、其实所谓的refactoring其实对source code的更改，源代码路径:
>
> [chromium](https://github.com/chromium/chromium)/[tools](https://github.com/chromium/chromium/tree/main/tools)/[**clang**](https://github.com/chromium/chromium/tree/main/tools/clang)/
>
> 

Clang tools can help with global refactorings of Chromium code. Clang tools can take advantage of clang's AST to perform refactorings that would be impossible with a traditional find-and-replace regexp:

1、Constructing `scoped_ptr<T>` from `NULL`: https://crbug.com/173286

> NOTE: 
>
> 这是 Jan 31, 2013 提出的bug，它所做的工作如下:
>
> 将
>
> ```C++
> std::unique_ptr<int> y(0);
> ```
>
> "Tool to fix calls to `scoped_ptr<T>(NULL)` to use the default ctor instead"
>
> ```C++
> std::unique_ptr<int> y;
> ```
>
> 为此，工程师专门开发了一个clang tool来执行这个工作，源码路径如下:
>
> >    A http://src.chromium.org/viewvc/chrome/trunk/src/tools/clang/rewrite_scoped_ptr_ctor_null?r1=205621&r2=205620&pathrev=205621
> >    A http://src.chromium.org/viewvc/chrome/trunk/src/tools/clang/rewrite_scoped_ptr_ctor_null/tests?r1=205621&r2=205620&pathrev=205621
> >    A http://src.chromium.org/viewvc/chrome/trunk/src/tools/clang/rewrite_scoped_ptr_ctor_null/tests/test-expected.cc?r1=205621&r2=205620&pathrev=205621
> >    M http://src.chromium.org/viewvc/chrome/trunk/src/tools/clang/scripts/test_tool.py?r1=205621&r2=205620&pathrev=205621
> >    A http://src.chromium.org/viewvc/chrome/trunk/src/tools/clang/rewrite_scoped_ptr_ctor_null/tests/test-original.cc?r1=205621&r2=205620&pathrev=205621
> >    A http://src.chromium.org/viewvc/chrome/trunk/src/tools/clang/rewrite_scoped_ptr_ctor_null/RewriteScopedPtrCtorNull.cpp?r1=205621&r2=205620&pathrev=205621
> >    A http://src.chromium.org/viewvc/chrome/trunk/src/tools/clang/rewrite_scoped_ptr_ctor_null/Makefile?r1=205621&r2=205620&pathrev=205621
>
> 目前的仓库中已经不包含上述code了
>
> 



2、Implicit conversions of `scoped_refptr<T>` to `T*`: https://crbug.com/110610

> NOTE: 
>
> > scoped_refptr provides:
> >
> > ```C++
> > operator T*() const { return ptr_; }
> > ```
> >
> > ...which allows a `scoped_refptr` to be silently & implicitly converted to a raw pointer. This can make it too easy to mix/match `scoped_refptrs` with raw pointers inadvertently. Doing so can easily lead to memory leaks or use-after-free errors.
>
> 
>
> > Remove implicit conversions from `scoped_refptr` to `T*` in chromeos/
> >
> > This patch was generated by running the `rewrite_scoped_refptr` clang tool on a ChromeOS build.
>
> source code:
>
> [chromium](https://github.com/chromium/chromium)/[tools](https://github.com/chromium/chromium/tree/main/tools)/[clang](https://github.com/chromium/chromium/tree/main/tools/clang)/[**rewrite_scoped_refptr**](https://github.com/chromium/chromium/tree/main/tools/clang/rewrite_scoped_refptr)/



3、Rename everything in Blink to follow Chromium style: https://crbug.com/563793

> NOTE: 
>
> source code:
>
> [chromium](https://github.com/chromium/chromium)/[tools](https://github.com/chromium/chromium/tree/main/tools)/[clang](https://github.com/chromium/chromium/tree/main/tools/clang)/[**rewrite_to_chrome_style**](https://github.com/chromium/chromium/tree/main/tools/clang/rewrite_to_chrome_style)/

4、Clean up of deprecated `base::Value` APIs: https://crbug.com/581865



## clang format

[chromium](https://github.com/chromium/chromium)/[**.clang-format**](https://github.com/chromium/chromium/blob/main/.clang-format)