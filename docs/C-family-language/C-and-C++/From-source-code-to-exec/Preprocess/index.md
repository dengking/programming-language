# Preprocessor 

## What is preprocessor?

参见: 

wikipedia [Preprocessor](https://en.wikipedia.org/wiki/Preprocessor)



microsoft [C/C++ preprocessor reference](C/C++ preprocessor reference)



[gcc The C Preprocessor](https://gcc.gnu.org/onlinedocs/cpp/)





## cppreference Preprocessor

The preprocessor is executed at [translation phase 4](https://en.cppreference.com/w/cpp/language/translation_phases), before the compilation. The result of preprocessing is a single file which is then passed to the actual compiler.

### Directives

preprocessing instruction

> NOTE: 预编译指令

`define`, `undef`, 

`include`, 

`if`, `ifdef`, `ifndef`, `else`, `elif`, `endif`, 

`line`, 

`error`, 

`pragma`

[[1\]](https://en.cppreference.com/w/cpp/preprocessor#cite_note-1)

### Capabilities

| Capability                                                   | 解释                                                         | Directives                                                   |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **[conditional](https://en.cppreference.com/w/cpp/preprocessor/conditional)** | **[conditionally](https://en.cppreference.com/w/cpp/preprocessor/conditional)** compile of parts of source file | `#if`, `#ifdef`, `#ifndef`, <br>`#else`, `#elif` and <br>`#endif` |
| **[replace](https://en.cppreference.com/w/cpp/preprocessor/replace)** |                                                              | 1) `#define` and `#undef` <br/>2) `#` and `##`               |
| **[include](https://en.cppreference.com/w/cpp/preprocessor/include)** |                                                              | `#include` <br>`__has_include` (since C++17)                 |
| **[error](https://en.cppreference.com/w/cpp/preprocessor/error)** |                                                              | \`#error`                                                    |



| Capability                                                   | 解释 | Directives                                     |
| ------------------------------------------------------------ | ---- | ---------------------------------------------- |
| **[implementation defined](https://en.cppreference.com/w/cpp/preprocessor/impl)** behavior |      | `#pragma` <br>operator `_Pragma` (since C++11) |
| **[file name and line information](https://en.cppreference.com/w/cpp/preprocessor/line)** |      | `#line`                                        |







## cppreference [Replacing text macros](https://en.cppreference.com/w/cpp/preprocessor/replace)





### Predefined macros

#### `__cplusplus`

denotes the version of C++ standard that is being used, expands to value :

199711L(until C++11), 

201103L(C++11), 

201402L(C++14), 

201703L(C++17), or 

202002L(C++20) (macro constant)

> NOTE: 

#### `__STDC_HOSTED__`(C++11)

expands to the integer constant 1 if the implementation is hosted (runs under an OS), 0 if freestanding (runs without an OS) (macro constant)

#### `__FILE__`  and`__LINE__`

expands to the name of the current file, as a character string literal, can be changed by the [`#line`](https://en.cppreference.com/w/cpp/preprocessor/line) directive (macro constant)

expands to the source file line number, an integer constant, can be changed by the [`#line`](https://en.cppreference.com/w/cpp/preprocessor/line) directive (macro constant)

#### `__DATE__` and `__TIME__`

expands to the date of translation, a character string literal of the form "Mmm dd yyyy". The first character of "dd" is a space if the day of the month is less than 10. The name of the month is as if generated by [std::asctime](http://en.cppreference.com/w/cpp/chrono/c/asctime)() (macro constant)

expands to the time of translation, a character string literal of the form "hh:mm:ss" (macro constant)



#### `__STDCPP_DEFAULT_NEW_ALIGNMENT__`(C++17)

expands to an [std::size_t](https://en.cppreference.com/w/cpp/types/size_t) literal whose value is the alignment guaranteed by a call to alignment-unaware [operator new](https://en.cppreference.com/w/cpp/memory/new/operator_new) (larger alignments will be passed to alignment-aware overload, such as [operator new](http://en.cppreference.com/w/cpp/memory/new/operator_new)([std::size_t](http://en.cppreference.com/w/cpp/types/size_t), [std::align_val_t](http://en.cppreference.com/w/cpp/memory/new/align_val_t)) (macro constant)













