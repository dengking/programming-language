# 前言

## 介绍

IM 第一代 SDK 使用各端原生语言进行开发，如 macOS/iOS 使用 Objective-C，Android 使用 Java 等，各端依赖不同的生态链，往往需要一端具备至少一位开发人员来维护和迭代产品。并且会发现在实际业务迭代中会出现各端业务逻辑实现不一致等问题。为了解决这些问题，在第二代 IM SDK 设计之初，我们期望通过跨平台 C++ 作为底层能力和业务开发，各端在 C++ 导出接口的基础之上再封装其他语言的粘合层。这样不仅确保了业务逻辑一致，甚至我们可以将其他语言的粘合层按一定规则通过工具自动生成。

该系列文章是在 IM 第二代 SDK Elite 日常开发迭代过程中管理三方库的总结，主要围绕 Conan 包管理工具、CI/CD 展开介绍，描述了具体工程场景中的痛点问题解决方案、特殊情况下的适配工作等。

## 适合人群

对目前现有 C++ 跨平台项目三方库的管理方案不满足，期望改造以提升编译速度、减少维护成本等。

## 推荐开发环境配置

在一切开始前，我们推荐（非强制）您的开发环境满足以下条件，以最大化的减少实际开发过程中的问题。

### 工具包

 - CMake 3.19+
 - Conan 1.48.0

::: tip 提示
推荐 CMake 使用 3.19 以上版本的原因是支持一些字符串到 JSON 数据的转换，可以让我们更方便的对版本号、RESTFul API 结果进行处理

截止 2022 年 9 月 5 日，我们发现新版本 Conan 1.50+ 存在对 Android NDK 传递架构参数异常问题，所以目前推荐 1.48+ 版本。待问题解决后我们更推荐您保持 Conan 为最新以方便体验到社区对新功能的支持。
:::

### 工具链

 - Windows：MSVC15 或更高版本
 - macOS：AppleClang12.4 或更高版本（12.4+ arm64 支持）
 - Linux：GCC5 或更高版本（对 C++ 14 标准支持最低的版本）

::: tip 提示
Linux 产物不像其他平台可以通过指定工具链版本很方便的管理产物依赖的系统版本，它往往依赖的是系统内核如 glibc 的版本。在 Linux 产物 CI 阶段要注意系统基础环境信息，我们将在 Linux 交叉编译中详细进行介绍。
:::
