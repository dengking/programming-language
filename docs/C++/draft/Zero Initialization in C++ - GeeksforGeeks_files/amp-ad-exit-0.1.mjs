(self.AMP=self.AMP||[]).push({n:"amp-ad-exit",v:"2006300332000",f:function(AMP,_){function g(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}let l=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function m(a){let b=Object.create(null);if(!a)return b;let c;for(;c=l.exec(a);){let a=g(c[1],c[1]),e=c[2]?g(c[2].replace(/\+/g," "),c[2]):"";b[a]=e}return b}let n="";function p(){let a=self;if(a.__AMP_MODE)var b=a.__AMP_MODE;else{{b=m(a.location.originalHash||a.location.hash);let c=m(a.location.search);n||(n=a.AMP_CONFIG&&a.AMP_CONFIG.v?a.AMP_CONFIG.v:"012006300332000");b={localDev:!1,development:!!(0<=["1","actions","amp","amp4ads","amp4email"].indexOf(b.development)||a.AMP_DEV_MODE),examiner:"2"==b.development,esm:!0,geoOverride:b["amp-geo"],minified:!0,lite:void 0!=c.amp_lite,test:!1,log:b.log,version:"2006300332000",rtvVersion:n}}b=a.__AMP_MODE=b}return b}let q=Object.prototype.toString;let r=self.AMP_CONFIG||{},t=("string"==typeof r.cdnProxyRegex?new RegExp(r.cdnProxyRegex):r.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function u(a){if(self.document&&self.document.head&&(!self.location||!t.test(self.location.origin))){var b=self.document.head.querySelector(`meta[name="${a}"]`);b&&b.getAttribute("content")}}r.cdnUrl||u("runtime-host");r.geoApiUrl||u("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let v=self.__AMP_LOG;function w(){if(!v.user)throw Error("failed to call initLogConstructor");return v.user}function x(){if(v.dev)return v.dev;throw Error("failed to call initLogConstructor")}function y(a,b,c,d){w().assert(a,b,c,d,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}class z{constructor(a,b){this.name=a;this.type=b}filter(){}onLayoutMeasure(){}}class A{constructor(){let a,b;this.promise=new Promise((c,d)=>{a=c;b=d});this.resolve=a;this.reject=b}}let B=Object.prototype.hasOwnProperty;class C{constructor(a){this.L=a;this.B=this.F=0;this.l=Object.create(null)}has(a){return!!this.l[a]}get(a){let b=this.l[a];if(b)return b.access=++this.B,b.payload}put(a,b){this.has(a)||this.F++;this.l[a]={payload:b,access:this.B};if(!(this.F<=this.L)){x().warn("lru-cache","Trimming LRU cache");a=this.l;var c=this.B+1;for(let b in a){let{access:e}=a[b];if(e<c){c=e;var d=b}}void 0!==d&&(delete a[d],this.F--)}}}(function(a){return a||{}})({c:!0,v:!0,a:!0,ad:!0,action:!0});let D,E;function F(a){D||(D=self.document.createElement("a"),E=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new C(100)));var b=E,c=D;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a}function G(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);let b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){let d=a.AMP_CONFIG[c];"number"===typeof d&&0<=d&&1>=d&&(b[c]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){let d=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(e){let a=e.getAttribute("content").split(",");for(c=0;c<a.length;c++)-1!=d.indexOf(a[c])&&(b[a[c]]=!0)}}Object.assign(b,H(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){c=a.AMP_CONFIG["allow-url-opt-in"];a=m(a.location.originalHash||a.location.hash);for(let d=0;d<c.length;d++){let e=a[`e-${c[d]}`];"1"==e&&(b[c[d]]=!0);"0"==e&&(b[c[d]]=!1)}}return b}function H(a){let b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(d){x().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}let c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(let b=0;b<c.length;b++)0!=c[b].length&&("-"==c[b][0]?a[c[b].substr(1)]=!1:a[c[b]]=!0);return a}let I={["ampdoc-fie"]:{isTrafficEligible:()=>!0,branches:[["21065001"],["21065002"]]}};function J(a){let b=a.ownerDocument.defaultView,c=K(b),d=b!=c;if(G(c)["ampdoc-fie"]){c.__AMP_EXPERIMENT_BRANCHES=c.__AMP_EXPERIMENT_BRANCHES||{};for(f in I)if(B.call(I,f)&&!B.call(c.__AMP_EXPERIMENT_BRANCHES,f))if(I[f].isTrafficEligible&&I[f].isTrafficEligible(c)){var e;if(e=!c.__AMP_EXPERIMENT_BRANCHES[f])e=f,e=!!G(c)[e];e&&(({branches:e}=I[f]),c.__AMP_EXPERIMENT_BRANCHES[f]=e[Math.floor(Math.random()*e.length)]||null)}else c.__AMP_EXPERIMENT_BRANCHES[f]=null;var f="21065002"===(c.__AMP_EXPERIMENT_BRANCHES?c.__AMP_EXPERIMENT_BRANCHES["ampdoc-fie"]:null)}else f=!1;let h=f;d&&!h?a=L(b,"url-replace")?M(b,"url-replace"):null:(a=N(a),a=O(a),a=L(a,"url-replace")?M(a,"url-replace"):null);return a}function K(a){return a.__AMP_TOP||(a.__AMP_TOP=a)}function N(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=K(b);a=M(b,"ampdoc").getAmpDoc(a)}return a}function O(a){a=N(a);return a.isSingleDoc()?a.win:a}function M(a,b){L(a,b);a=P(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Q(a){var b;(b=P(a)["host-exit"])?b.promise?b=b.promise:(M(a,"host-exit"),b=b.promise=Promise.resolve(b.obj)):b=null;let c=b;if(c)return c;a=P(a);a["host-exit"]=aa();return a["host-exit"].promise}function P(a){let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function L(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}function aa(){let a=new A,b=a.promise,c=a.resolve,d=a.reject;b.catch(()=>{});return{obj:null,promise:b,resolve:c,reject:d,context:null,ctor:null}}
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function R(a,b,c){let d;try{d=a.open(b,c,void 0)}catch(f){x().error("DOM","Failed to open url on target: ",c,f)}if(!(c=d||"_top"==c)){var e;"number"!==typeof e&&(e=0);c=0<e+8?!1:-1!=="".indexOf("noopener",e)}c||a.open(b,"_top")}function ba(a){return"SCRIPT"==a.tagName&&a.hasAttribute("type")&&"APPLICATION/JSON"==a.getAttribute("type").toUpperCase()}let S;function ca(a,b){let e,c=a,d=b;e=a=>{try{return d(a)}catch(k){throw self.__AMP_REPORT_ERROR(k),k}};let f=da();c.addEventListener("message",e,f?void 0:!1);return()=>{c&&c.removeEventListener("message",e,f?void 0:!1);e=c=d=null}}function da(){if(void 0!==S)return S;S=!1;try{let a={get capture(){S=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(a){}return S}function ea(a,b){return ca(a,b)}function T(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter((function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})));c.push.apply(c,d)}return c}function U(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?T(Object(c),!0).forEach((function(b){var d=c[b];b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[b]=d})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):T(Object(c)).forEach((function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))}))}return a}let V={bg:"https://tpc.googlesyndication.com/b4a/b4a-runner.html",moat:"https://z.moatads.com/ampanalytics093284/iframe.html"};U(U({},V),{},{bg:"https://tpc.googlesyndication.com/b4a/experimental/b4a-runner.html"});function fa(a){y("object"==typeof a);if(a.filters){var b=a.filters;let c=["clickDelay","clickLocation","inactiveElement"];for(let a in b)y("object"==typeof b[a],"Filter specification '%s' is malformed",a),y(-1!=c.indexOf(b[a].type),"Supported filters: "+c.join(", "))}else a.filters={};if(a.transport){b=a.transport;for(var c in b)y("beacon"==c||"image"==c,`Unknown transport option: '${c}'`),y("boolean"==typeof b[c])}else a.transport={};c=a.targets;y("object"==typeof c,"'targets' must be an object");for(let b in c)ha(b,c[b],a);return a}function ha(a,b,c){y("string"==typeof b.finalUrl,"finalUrl of target '%s' must be a string",a);b.filters&&b.filters.forEach(a=>{y(c.filters[a],"filter '%s' not defined",a)});if(b.vars){a=/^_[a-zA-Z0-9_-]+$/;for(let c in b.vars)y(a.test(c),"'%s' must match the pattern '%s'",c,a)}}function W(a){return w().assertString(V[a],`Unknown or invalid vendor ${a}, note that vendor must use transport: iframe`)}class ia extends z{constructor(a,b,c){super(a,b.type);y("clickDelay"==b.type&&"number"==typeof b.delay&&0<b.delay,"Invalid ClickDelay spec");this.spec=b;this.intervalStart=Date.now();b.startTimingEvent&&(c.performance&&c.performance.timing?void 0==c.performance.timing[b.startTimingEvent]?x().warn("amp-ad-exit",`Invalid performance timing event type ${b.startTimingEvent}, falling back to now`):this.intervalStart=c.performance.timing[b.startTimingEvent]:x().warn("amp-ad-exit","Browser does not support performance timing, falling back to now"))}filter(){return Date.now()-this.intervalStart>=this.spec.delay}}class ja extends z{constructor(a,b,c){super(a,b.type);y("clickLocation"==b.type&&("undefined"===typeof b.left||"number"===typeof b.left)&&("undefined"===typeof b.right||"number"===typeof b.right)&&("undefined"===typeof b.top||"number"===typeof b.top)&&("undefined"===typeof b.bottom||"number"===typeof b.bottom)&&("undefined"===typeof b.relativeTo||"string"===typeof b.relativeTo),"Invaid ClickLocation spec");this.M=b.left||0;this.N=b.right||0;this.P=b.top||0;this.K=b.bottom||0;this.D=b.relativeTo;this.H=c;this.h={top:0,right:0,bottom:0,left:0}}filter(a){return a.clientX>=this.h.left&&a.clientX<=this.h.right&&a.clientY>=this.h.top&&a.clientY<=this.h.bottom?!0:!1}onLayoutMeasure(){this.H.getVsync().measure(()=>{let a=this.H.win;if(this.D){let b=a.document.querySelector(this.D);y(b,`relativeTo element ${this.D} not found.`);let c=b.getBoundingClientRect();this.h.left=c.left;this.h.top=c.top;this.h.bottom=c.bottom;this.h.right=c.right}else this.h.left=0,this.h.top=0,this.h.bottom=a.innerHeight,this.h.right=a.innerWidth;this.h.left+=this.M;this.h.top+=this.P;this.h.right-=this.N;this.h.bottom-=this.K})}}class ka extends z{constructor(a,b){super(a,b.type);y("inactiveElement"==b.type&&"string"==typeof b.selector,"Invalid InactiveElementspec");this.O=b.selector}filter(a){{a=a.target;let b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;a=b?b.call(a,this.O):!1}return!a}}function X(a,b,c){switch(b.type){case"clickDelay":return new ia(a,b,c.win);case"clickLocation":return new ja(a,b,c);case"inactiveElement":return new ka(a,b)}}function la(a,b){try{a:{let d=(a.ownerDocument||a).defaultView,f=b||K(d);if(d&&d!=f&&K(d)==f)try{var c=d.frameElement;break a}catch(h){}c=null}let d=c.parentElement;if("AMP-AD"==d.nodeName)return String(d.getResourceId())}catch(d){}return null}function Y(a,b){return a.every(a=>{let c=a.filter(b);w().info("amp-ad-exit",`Filter '${a.name}': ${c?"pass":"fail"}`);return c})}function ma(a,b,c,d){let e={CLICK_X:()=>c.clientX,CLICK_Y:()=>c.clientY},f=J(a.element),h={RANDOM:!0,CLICK_X:!0,CLICK_Y:!0};if(d.vars)for(let c in d.vars){if("_"!=c[0])continue;let k=d.vars[c];k&&(e[c]=()=>{if(k.iframeTransportSignal){let b=f.expandStringSync(k.iframeTransportSignal,{IFRAME_TRANSPORT_SIGNAL:(b,c)=>{if(!b||!c)return"";let d=a.J[b];if(d&&c in d)return d[c]}});if(k.iframeTransportSignal==`IFRAME_TRANSPORT_SIGNAL${b}`)x().error("amp-ad-exit","Invalid IFRAME_TRANSPORT_SIGNAL format:"+b+" (perhaps there is a space after a comma?)");else if(""!=b)return b}return c in b?b[c]:k.defaultValue},h[c]=!0)}return a=>f.expandUrlSync(a,e,h)}function Z(a){"inabox"!=p().runtime&&(a.j=a.j||la(a.element,K(a.win)),a.j?a.w=ea(a.getAmpDoc().win,b=>{if(a.C[b.origin]){var c=b.data;if("string"==typeof c&&0==c.indexOf("amp-")&&-1!=c.indexOf("{")){var d=c.indexOf("{");try{var e=JSON.parse(c.substr(d))}catch(f){x().error("MESSAGING","Failed to parse message: "+c,f),e=null}}else e=null;e&&"iframe-transport-response"==e.type&&(c=e,b=b.origin,y(c.message,"Received empty response from 3p analytics frame"),y(c.creativeId,"Received malformed message from 3p analytics frame: creativeId missing"),y(c.vendor,"Received malformed message from 3p analytics frame: vendor missing"),d=F(W(c.vendor)),y(d&&d.origin==b,`Invalid origin for vendor ${c.vendor}: ${b}`),e.creativeId==a.j&&(a.J[e.vendor]=e.message))}}):w().warn("amp-ad-exit","No friendly parent amp-ad element was found for amp-ad-exit; not in inabox case."))}class na extends AMP.BaseElement{constructor(a){super(a);this.G={};this.I={};this.m=[];this.o={beacon:!0,image:!0};this.A={};this.registerAction("exit",this.exit.bind(this));this.registerAction("setVariable",this.setVariable.bind(this),1);this.J={};this.j=this.w=null;this.C={}}exit(a){let b=a.args;let{event:c}=a;y("variable"in b!="target"in b,"One and only one of 'target' and 'variable' must be specified");let d;"variable"in b?((d=this.I[b.variable])||(d=b["default"]),y(d,`Variable target not found, variable:'${b.variable}', default:'${b["default"]}'`),delete b["default"]):d=b.target;let e=this.G[d];y(e,`Exit target not found: '${d}'`);y(c,"Unexpected null event");c.preventDefault();if(Y(this.m,c)&&Y(e.filters,c)){var f=ma(this,b,c,e);e.trackingUrls&&e.trackingUrls.map(f).forEach(a=>{this.o.beacon&&this.win.navigator.sendBeacon&&this.win.navigator.sendBeacon(a,"")||!this.o.image||(this.win.document.createElement("img").src=a)});var h=f(e.finalUrl);N(this.getAmpDoc()).getHeadNode().querySelector("script[host-service]")?Q(O(this.getAmpDoc())).then(a=>a.openUrl(h)).catch(a=>{a.fallback&&R(this.win,h,"_blank")}):R(this.win,h,e.behaviors&&e.behaviors.clickTarget&&"_top"==e.behaviors.clickTarget?"_top":"_blank")}}setVariable(a){a=a.args;y(this.G[a.target],`Exit target not found: '${a.target}'`);this.I[a.name]=a.target}buildCallback(){this.element.setAttribute("aria-hidden","true");this.m.push(X("minDelay",{type:"clickDelay",delay:1e3,startTimingEvent:void 0},this));this.m.push(X("carouselBtns",{type:"inactiveElement",selector:".amp-carousel-button"},this));var a=this.element.children;y(1==a.length,"The tag should contain exactly one <script> child.");a=a[0];y(ba(a),'The amp-ad-exit config should be inside a <script> tag with type="application/json"');try{let b=fa(JSON.parse(a.textContent));let c;"[object Object]"===q.call(b.options)&&"string"===typeof b.options.startTimingEvent&&(c=b.options.startTimingEvent,this.m.splice(0,1,X("minDelay",{type:"clickDelay",delay:1e3,startTimingEvent:b.options.startTimingEvent},this)));for(let a in b.filters){let d=b.filters[a];"clickDelay"==d.type&&(d.startTimingEvent=d.startTimingEvent||c);this.A[a]=X(a,d,this)}for(let a in b.targets){let c=b.targets[a];this.G[a]={finalUrl:c.finalUrl,trackingUrls:c.trackingUrls||[],vars:c.vars||{},filters:(c.filters||[]).map(a=>this.A[a]).filter(a=>a),behaviors:c.behaviors||{}};for(let a in c.vars){if(!c.vars[a].iframeTransportSignal)continue;let b=c.vars[a].iframeTransportSignal.match(/IFRAME_TRANSPORT_SIGNAL\(([^,]+)/);if(!b||2>b.length)continue;let d=b[1],{origin:e}=F(W(d));this.C[e]=this.C[e]||d}}this.o.beacon=!1!==b.transport.beacon;this.o.image=!1!==b.transport.image}catch(b){throw this.user().error("amp-ad-exit","Invalid JSON config",b),b}Z(this)}resumeCallback(){Z(this)}unlayoutCallback(){this.w&&(this.w(),this.w=null);return super.unlayoutCallback()}isLayoutSupported(){return!0}onLayoutMeasure(){for(let a in this.A)this.A[a].onLayoutMeasure()}}(a=>{a.registerElement("amp-ad-exit",na)})(self.AMP)}});