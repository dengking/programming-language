(self.AMP=self.AMP||[]).push({n:"amp-form",v:"2006300332000",f:function(AMP,_){let l;function m(){return l?l:l=Promise.resolve(void 0)}function aa(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}let ba=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function n(a){let b=Object.create(null);if(!a)return b;let c;for(;c=ba.exec(a);){let a=aa(c[1],c[1]),e=c[2]?aa(c[2].replace(/\+/g," "),c[2]):"";b[a]=e}return b}let ca=Object.prototype.toString;function da(a){return a?Array.prototype.slice.call(a):[]}let p=self.AMP_CONFIG||{},ea=("string"==typeof p.cdnProxyRegex?new RegExp(p.cdnProxyRegex):p.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function fa(a){if(!self.document||!self.document.head||self.location&&ea.test(self.location.origin))return null;let b=self.document.head.querySelector(`meta[name="${a}"]`);return b&&b.getAttribute("content")||null}let ha={thirdParty:p.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:p.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof p.thirdPartyFrameRegex?new RegExp(p.thirdPartyFrameRegex):p.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:p.cdnUrl||fa("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:ea,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:p.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:p.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:p.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:p.geoApiUrl||fa("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let q=self.__AMP_LOG;function t(){if(!q.user)throw Error("failed to call initLogConstructor");return q.user}function v(){if(q.dev)return q.dev;throw Error("failed to call initLogConstructor")}function w(a,b,c,d){t().assert(a,b,c,d,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}class ia{constructor(){let a,b;this.promise=new Promise((c,d)=>{a=c;b=d});this.resolve=a;this.reject=b}}function ja(a){return new Promise(b=>{b(a())})}class ka{constructor(a){let b,c;this.na=new Promise((a,e)=>{b=a;c=e});this.Ba=b;this.za=c;this.X=0;if(a)for(let b=0;b<a.length;b++)this.add(a[b])}add(a){let b=++this.X;Promise.resolve(a).then(a=>{this.X===b&&this.Ba(a)},a=>{this.X===b&&this.za(a)});return this.na}then(a,b){return this.na.then(a,b)}}let la=Object.prototype.hasOwnProperty;function x(){return Object.create(null)}function y(a){return a||{}}function ma(a,b){let c=[],d=[];for(d.push({t:a,s:b,d:0});0<d.length;){let{t:a,s:b,d:g}=d.shift();if(c.includes(b))throw Error("Source object has a circular reference.");c.push(b);a!==b&&(10<g?Object.assign(a,b):Object.keys(b).forEach(c=>{let e=b[c];if(la.call(a,c)){let b=a[c];if("[object Object]"===ca.call(e)&&"[object Object]"===ca.call(b)){d.push({t:b,s:e,d:g+1});return}}a[c]=e}))}}class na{constructor(a){this.wa=a;this.W=this.ca=0;this.P=Object.create(null)}has(a){return!!this.P[a]}get(a){let b=this.P[a];if(b)return b.access=++this.W,b.payload}put(a,b){this.has(a)||this.ca++;this.P[a]={payload:b,access:this.W};if(!(this.ca<=this.wa)){v().warn("lru-cache","Trimming LRU cache");a=this.P;var c=this.W+1;for(let b in a){let{access:e}=a[b];if(e<c){c=e;var d=b}}void 0!==d&&(delete a[d],this.ca--)}}}function z(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)}let oa=y({c:!0,v:!0,a:!0,ad:!0,action:!0});let pa,qa;let ra=/[?&]amp_js[^&]*/,sa=/[?&]amp_gsa[^&]*/,ta=/[?&]amp_r[^&]*/,ua=/[?&]amp_kit[^&]*/,va=/[?&]usqp[^&]*/;function A(a){pa||(pa=self.document.createElement("a"),qa=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new na(100)));var b=qa,c=pa;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a}function wa(a,b,c){if(!b)return a;let d=a.split("#",2),e=d[0].split("?",2);let f=e[0]+(e[1]?c?`?${b}&${e[1]}`:`?${e[1]}&${b}`:`?${b}`);return f+=d[1]?`#${d[1]}`:""}function xa(a){let b=[];for(let d in a){let e=a[d];if(null!=e)if(Array.isArray(e))for(var c=0;c<e.length;c++){let a=e[c];b.push(`${encodeURIComponent(d)}=${encodeURIComponent(a)}`)}else c=e,b.push(`${encodeURIComponent(d)}=${encodeURIComponent(c)}`)}return b.join("&")}function ya(a){"string"==typeof a&&(a=A(a));return ha.cdnProxyRegex.test(a.origin)}function za(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);let b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){let d=a.AMP_CONFIG[c];"number"===typeof d&&0<=d&&1>=d&&(b[c]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){let d=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(e){let a=e.getAttribute("content").split(",");for(c=0;c<a.length;c++)-1!=d.indexOf(a[c])&&(b[a[c]]=!0)}}Object.assign(b,Aa(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){c=a.AMP_CONFIG["allow-url-opt-in"];a=n(a.location.originalHash||a.location.hash);for(let d=0;d<c.length;d++){let e=a[`e-${c[d]}`];"1"==e&&(b[c[d]]=!0);"0"==e&&(b[c[d]]=!1)}}return b}function Aa(a){let b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(d){v().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}let c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(let b=0;b<c.length;b++)0!=c[b].length&&("-"==c[b][0]?a[c[b].substr(1)]=!1:a[c[b]]=!0);return a}let B={["ampdoc-fie"]:{isTrafficEligible:()=>!0,branches:[["21065001"],["21065002"]]}};function C(a,b){let c=a.ownerDocument.defaultView,d=c.__AMP_TOP||(c.__AMP_TOP=c),e=c!=d;if(za(d)["ampdoc-fie"]){d.__AMP_EXPERIMENT_BRANCHES=d.__AMP_EXPERIMENT_BRANCHES||{};for(g in B)if(la.call(B,g)&&!la.call(d.__AMP_EXPERIMENT_BRANCHES,g))if(B[g].isTrafficEligible&&B[g].isTrafficEligible(d)){var f;if(f=!d.__AMP_EXPERIMENT_BRANCHES[g])f=g,f=!!za(d)[f];f&&(({branches:f}=B[g]),d.__AMP_EXPERIMENT_BRANCHES[g]=f[Math.floor(Math.random()*f.length)]||null)}else d.__AMP_EXPERIMENT_BRANCHES[g]=null;var g="21065002"===(d.__AMP_EXPERIMENT_BRANCHES?d.__AMP_EXPERIMENT_BRANCHES["ampdoc-fie"]:null)}else g=!1;let h=g;e&&!h?b=Ba(c,b)?D(c,b):null:(a=E(a),a=F(a),b=Ba(a,b)?D(a,b):null);return b}function G(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return D(a,b)}function H(a,b){var c=E(a);c=F(c);return D(c,b)}function Ca(a,b){return Da(F(a),b)}function E(a){return a.nodeType?G((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function F(a){a=E(a);return a.isSingleDoc()?a.win:a}function D(a,b){Ba(a,b);a=Ea(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Fa(a,b){let c=Da(a,b);if(c)return c;a=Ea(a);a[b]=Ga();return a[b].promise}function Da(a,b){let c=Ea(a)[b];if(c){if(c.promise)return c.promise;D(a,b);return c.promise=Promise.resolve(c.obj)}return null}function Ea(a){let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function Ba(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}function Ga(){let a=new ia,b=a.promise,c=a.resolve,d=a.reject;b.catch(()=>{});return{obj:null,promise:b,resolve:c,reject:d,context:null,ctor:null}}
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
let Ia;function Ja(a,b,c=null){c?a.insertBefore(b,c.nextSibling):a.insertBefore(b,a.firstChild)}function Ka(a,b){let c=[];for(let d=a.parentElement;d;d=d.parentElement)b(d)&&c.push(d);return c}function La(a){var b="fieldset";/^[\w-]+$/.test(b);b=b.toUpperCase();return Ka(a,a=>a.tagName==b)}function I(a,b){let c=a.length;for(let d=0;d<c;d++)b(a[d],d)}function Ma(a,b,c){let d=Ca(a,b);if(d)return d;let e=E(a);return e.waitForBodyOpen().then(()=>{var a=e.win;var b=e.win.document.head;if(b){var d={};b=b.querySelectorAll("script[custom-element],script[custom-template]");for(let a=0;a<b.length;a++){var k=b[a];k=k.getAttribute("custom-element")||k.getAttribute("custom-template");d[k]=!0}d=Object.keys(d)}else d=[];return d.includes(c)?G(a,"extensions").waitForExtension(a,c):m()}).then(()=>{var d=e.win;return d.__AMP_EXTENDED_ELEMENTS&&d.__AMP_EXTENDED_ELEMENTS[c]?Fa(F(a),b):null})}function J(a){return H(a,"mutator")}let K;let Na="Webkit webkit Moz moz ms O o".split(" ");function Oa(a,b,c){var d=a.style;if(!z(b,"--")){K||(K=x());var e=K[b];if(!e){e=b;if(void 0===d[b]){var f=b.charAt(0).toUpperCase()+b.slice(1);b:{for(let a=0;a<Na.length;a++){let b=Na[a]+f;if(void 0!==d[b]){f=b;break b}}f=""}void 0!==d[f]&&(e=f)}K[b]=e}b=e}b&&(z(b,"--")?a.style.setProperty(b,c):a.style[b]=c)}function Pa(a,b){void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}let L;function Qa(a,b,c){let f,d=a,e=c;f=a=>{try{return e(a)}catch(k){throw self.__AMP_REPORT_ERROR(k),k}};let g=Ra();d.addEventListener(b,f,g?void 0:!1);return()=>{d&&d.removeEventListener(b,f,g?void 0:!1);f=d=e=null}}function Ra(){if(void 0!==L)return L;L=!1;try{let a={get capture(){L=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(a){}return L}function M(a,b,c,d){let e={detail:c};Object.assign(e,d);if("function"==typeof a.CustomEvent)return new a.CustomEvent(b,e);a=a.document.createEvent("CustomEvent");a.initCustomEvent(b,!!e.bubbles,!!e.cancelable,c);return a}function Sa(a,b,c){return Qa(a,b,c)}function Ta(a,b){let c=b;let d=Qa(a,"mouseup",a=>{try{c(a)}finally{c=null,d()}});return d}function Ua(a){let b;let c=new Promise(c=>{b=Ta(a,c)});c.then(b,b);return c}function Va(a,b){function c(c){f=null;e=a.setTimeout(d,100);b.apply(null,c)}function d(){e=0;f&&c(f)}let e=0,f=null;return function(...a){e?f=a:c(a)}}function Wa(a){let b=a.getRootNode();let c=null;let d=()=>{let d=b.querySelector("textarea[autoexpand]");d&&!c?c=new Xa(a):!d&&c&&(c.dispose(),c=null)};Qa(b,"amp:dom-update",d);d()}class Xa{constructor(a){let b=a.getRootNode();this.J=b.ownerDocument||b;this.j=this.J.defaultView;this.ea=H(a,"viewport");this.L=[];this.L.push(Sa(b,"input",a=>{a=a.target;"TEXTAREA"==a.tagName&&a.hasAttribute("autoexpand")&&Ya(a)}));this.L.push(Sa(b,"mousedown",a=>{1==a.which&&(a=a.target,"TEXTAREA"==a.tagName&&Za(a))}));let c=b.querySelectorAll("textarea");this.L.push(Sa(b,"amp:dom-update",()=>{c=b.querySelectorAll("textarea")}));let d=Va(this.j,a=>{a.relayoutAll&&$a(c)});this.L.push(this.ea.onResize(d));ab(c)}dispose(){this.L.forEach(a=>a())}}function ab(a){Promise.all(da(a).map(a=>bb(a).then(b=>{b&&(t().warn("AMP-FORM",'"textarea[autoexpand]" with initially scrolling content will not autoexpand.\nSee https://github.com/ampproject/amphtml/issues/20839'),a.removeAttribute("autoexpand"))})))}function bb(a){return J(a).measureElement(()=>a.scrollHeight>a.clientHeight)}function $a(a){I(a,a=>{"TEXTAREA"==a.tagName&&a.hasAttribute("autoexpand")&&Ya(a)})}function Za(a){let b=J(a);Promise.all([b.measureElement(()=>a.scrollHeight),Ua(a)]).then(c=>{let d=c[0];let e=0;return b.measureMutateElement(a,()=>{e=a.scrollHeight},()=>{d!=e&&a.removeAttribute("autoexpand")})})}function Ya(a){let b=J(a),c=a.ownerDocument.defaultView;let d=0,e=0,f=0;let g=cb(a);b.measureMutateElement(a,()=>{let b=c.getComputedStyle(a)||x();e=a.scrollHeight;let g=parseInt(b.getPropertyValue("max-height"),10);f=isNaN(g)?1/0:g;d="content-box"==b.getPropertyValue("box-sizing")?-parseInt(b.getPropertyValue("padding-top"),10)+-parseInt(b.getPropertyValue("padding-bottom"),10):parseInt(b.getPropertyValue("border-top-width"),10)+parseInt(b.getPropertyValue("border-bottom-width"),10)},()=>g.then(b=>{a.classList.toggle("i-amphtml-textarea-max",b+d>f);if("iAmphtmlHasExpanded"in a.dataset||e<=b)a.dataset.iAmphtmlHasExpanded="",Oa(a,"height",`${b+d}px`)}))}function cb(a){let b=a.ownerDocument,c=b.defaultView,d=b.body,e=J(a),f=a.cloneNode(!1);f.classList.add("i-amphtml-textarea-clone");let g=0,h=0,k=!1;return e.measureMutateElement(d,()=>{let b=c.getComputedStyle(a)||x(),d=parseInt(b.getPropertyValue("max-height"),10);g=parseInt(b.getPropertyValue("width"),10);k=isNaN(d)||a.scrollHeight<d},()=>{k&&(a.scrollTop=0);Oa(f,"width",`${g}px`);b.body.appendChild(f)}).then(()=>e.measureMutateElement(d,()=>{h=f.scrollHeight},()=>{f.parentElement&&f.parentElement.removeChild(f)})).then(()=>h)}function N(a){let b=a.elements,c={},d=/^(?:input|select|textarea)$/i,e=/^(?:submit|button|image|file|reset)$/i,f=/^(?:checkbox|radio)$/i;for(let a=0;a<b.length;a++){let g=b[a],h=g.checked,u=g.name,Ib=g.multiple,Jb=g.options,Kb=g.tagName,Ha=g.type,Lb=g.value;!u||db(g)||!d.test(Kb)||e.test(Ha)||f.test(Ha)&&!h||(void 0===c[u]&&(c[u]=[]),Ib?I(Jb,a=>{a.selected&&c[u].push(a.value)}):c[u].push(Lb))}let g=eb(a);g&&g.name&&(a=g.name,void 0===c[a]&&(c[a]=[]),c[g.name].push(g.value));Object.keys(c).forEach(a=>{0==c[a].length&&delete c[a]});return c}function eb(a){let b=a.elements,c=b.length,d=a.ownerDocument.activeElement;let e=null;for(a=0;a<c;a++){let c=b[a];var f=c.type;if(f="BUTTON"==c.tagName||"submit"==f)if(e||(e=c),d==c)return d}return e}function db(a){if(a.disabled)return!0;a=La(a);for(let b=0;b<a.length;b++)if(a[b].disabled)return!0;return!1}function fb(a){switch(a.type){case"select-multiple":case"select-one":a=a.options;for(let b=0;b<a.length;b++)if(a[b].selected!==a[b].defaultSelected)return!1;break;case"checkbox":case"radio":return a.checked===a.defaultChecked;default:return a.value===a.defaultValue}return!0}function gb(a,b){return a.hasAttribute("verify-xhr")?new hb(a,b):new ib(a)}function jb(a){(a=a.h.elements)&&I(a,a=>{a.setCustomValidity("")})}class kb{constructor(a){this.h=a}onCommit(){jb(this);a:{var a=this.h.elements;for(let b=0;b<a.length;b++){let c=a[b];if(!c.disabled&&!fb(c)){a=!0;break a}}a=!1}return a?this.qa():Promise.resolve({updatedElements:[],errors:[]})}qa(){return Promise.resolve({updatedElements:[],errors:[]})}}class ib extends kb{}function lb(a,b){if(!a.O){a.O=new ka;let b=()=>a.O=null;a.O.then(b,b)}return a.O.add(b)}function mb(a,b){let c=[],d=a.ma;a.ma=b;for(let d=0;d<b.length;d++){var e=b[d],f=t().assertString(e.name,"Verification errors must have a name property");e=t().assertString(e.message,"Verification errors must have a message property");f=t().assertElement(a.h.querySelector(`[name="${f}"]`),"Verification error name property must match a field name");f.checkValidity()&&(f.setCustomValidity(e),c.push(f))}let g=d.filter(a=>b.every(b=>a.name!==b.name)).map(b=>a.h.querySelector(`[name="${b.name}"]`));return{updatedElements:c.concat(g),errors:b}}class hb extends kb{constructor(a,b){super(a);this.S=b;this.O=null;this.ma=[]}qa(){let a=this.S().then(()=>[],a=>nb(a));return lb(this,a).then(a=>mb(this,a))}}function nb(a){return(a=a.response)?a.json().then(a=>a.verifyErrors||[],()=>[]):Promise.resolve([])}function ob(a,b){let c=G(a,"platform");return c.isIos()&&11==c.getMajorVersion()?new pb(b):FormData.prototype.entries&&FormData.prototype.delete?new qb(b):new rb(b)}class rb{constructor(a){this.o=a?N(a):x()}append(a,b){let c=String(a);this.o[c]=this.o[c]||[];this.o[c].push(String(b))}delete(a){delete this.o[a]}entries(){let a=[];Object.keys(this.o).forEach(b=>{this.o[b].forEach(c=>a.push([b,c]))});let b=0;return{next(){return b<a.length?{value:a[b++],done:!1}:{value:void 0,done:!0}}}}getFormData(){let a=new FormData;Object.keys(this.o).forEach(b=>{this.o[b].forEach(c=>a.append(b,c))});return a}}class qb{constructor(a){this.w=new FormData(a);a&&(a=eb(a))&&a.name&&this.append(a.name,a.value)}append(a,b){this.w.append(a,b)}delete(a){this.w.delete(a)}entries(){return this.w.entries()}getFormData(){return this.w}}class pb extends qb{constructor(a){super(a);a&&I(a.elements,a=>{"file"==a.type&&0==a.files.length&&(this.w.delete(a.name),this.w.append(a.name,new Blob([]),""))})}append(a,b,c){b&&"object"==typeof b&&""==b.name&&0==b.size?this.w.append(a,new Blob([]),c||""):this.w.append(a,b)}}let sb={INPUT:!0,SELECT:!0,TEXTAREA:!0};function O(a){let b=0<a.I&&!a.U;if(b!==a.sa){a.h.classList.toggle("amp-form-dirty",b);let c=M(a.j,"amp:form-dirtiness-change",y({isDirty:b}),{bubbles:!0});a.h.dispatchEvent(c)}a.sa=b}function tb(a,b){var c=b.hidden;c=sb[b.tagName]?!b.name||c||db(b):!0;if(!c){a:switch(b.tagName){case"INPUT":c="checkbox"==b.type||"radio"==b.type?!b.checked:!b.value;break a;case"TEXTAREA":c=!b.value;break a;case"SELECT":c=!1;break a;default:throw Error(`isFieldEmpty: ${b.tagName} is not a supported field element.`)}(c=c||fb(b))||(a.da?(c=b.value,c=a.da.get(b.name)===c):c=!1);c?(b=b.name,a.D[b]&&(a.D[b]=!1,--a.I)):(b=b.name,a.D[b]||(a.D[b]=!0,++a.I))}}class ub{constructor(a,b){this.h=a;this.j=b;this.I=0;this.D=x();this.da=null;this.sa=this.U=!1;this.ba();for(a=0;a<this.h.elements.length;++a)tb(this,this.h.elements[a]);O(this)}onSubmitting(){this.U=!0;O(this)}onSubmitError(){this.U=!1;O(this)}onSubmitSuccess(){this.U=!1;this.da=ob(this.j,this.h).getFormData();this.D=x();this.I=0;O(this)}ba(){this.h.addEventListener("input",this.la.bind(this));this.h.addEventListener("reset",this.ya.bind(this));this.h.addEventListener("amp:form-value-change",this.la.bind(this))}la(a){tb(this,a.target);O(this)}ya(){this.D=x();this.I=0;O(this)}}class vb{constructor(){this.l=null}add(a){this.l||(this.l=[]);this.l.push(a);return()=>{this.remove(a)}}remove(a){this.l&&(a=this.l.indexOf(a),-1<a&&this.l.splice(a,1))}removeAll(){this.l&&(this.l.length=0)}fire(a){if(this.l){var b=this.l;for(let c=0;c<b.length;c++)(0,b[c])(a)}}getHandlerCount(){return this.l?this.l.length:0}}class wb{constructor(){this.ka=new vb}beforeSubmit(a){return this.ka.add(a)}fire(a){this.ka.fire(a)}}function xb(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter((function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})));c.push.apply(c,d)}return c}function yb(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xb(Object(c),!0).forEach((function(b){var d=c[b];b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[b]=d})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xb(Object(c)).forEach((function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))}))}return a}let zb=["GET","POST"];function Ab(a){let b=a.getAttribute("crossorigin");return b&&"amp-viewer-auth-token-via-post"===b.trim()?Ma(a,"amp-viewer-assistance","amp-viewer-assistance").then(a=>{w(a,'crossorigin="amp-viewer-auth-token-post" requires amp-viewer-assistance extension.');return a.getIdTokenPromise()}).then(a=>a||"").catch(()=>""):Promise.resolve(void 0)}function Bb(a,b,c,d,e={}){let f=y({type:a.Ca}),g=d&&d.successTemplate?d.successTemplate:c;g&&(f.successTemplate={type:"amp-mustache",payload:g.innerHTML});let h=d&&d.errorTemplate?d.errorTemplate:null;h&&(f.errorTemplate={type:"amp-mustache",payload:h.innerHTML});e&&Object.assign(f,e);a=b.xhrUrl;c=b.fetchOpt;b=yb({},c);if((d=c.body)&&"function"==typeof d.getFormData){c=c.body;b.headers["Content-Type"]="multipart/form-data;charset=utf-8";c=c.entries();d=[];for(e=c.next();!e.done;e=c.next())d.push(e.value);c=d;b.body=c}a={input:a,init:b};return y({originalRequest:a,ampComponent:f})}class Cb{constructor(a,b,c){this.F=b;this.m=c;this.Ca=a}isEnabled(){let a=this.F.getAmpDoc();return a.isSingleDoc()&&a.getRootNode().documentElement.hasAttribute("allow-viewer-render-template")?this.F.hasCapability("viewerRenderTemplate"):!1}assertTrustedViewer(a){return this.F.isTrustedViewer().then(b=>{w(b,"Refused to attempt SSR in untrusted viewer: ",a)})}ssr(a,b,c=null,d={}){let e;c||(e=this.m.maybeFindTemplate(a));return this.assertTrustedViewer(a).then(()=>this.F.sendMessageAwaitResponse("viewerRenderTemplate",Bb(this,b,e,c,d)))}applySsrOrCsrTemplate(a,b){let c;this.isEnabled()?(w("string"===typeof b.html,"Server side html response must be defined"),c=this.assertTrustedViewer(a).then(()=>this.m.findAndSetHtmlForTemplate(a,b.html))):c=Array.isArray(b)?this.m.findAndRenderTemplateArray(a,b):this.m.findAndRenderTemplate(a,b);return c}}class Db{constructor(a,b){this.aa=b;this.ea=H(a,"viewport");this.ra=G(a.win,"vsync");this.Z=null;this.Y="";this.V=!1;this.C=a.win.document.createElement("div");Pa(this.C,!1);this.C.classList.add("i-amphtml-validation-bubble");this.C.__BUBBLE_OBJ=this;a.getBody().appendChild(this.C)}isActiveOn(a){return this.V&&a==this.Z}hide(){this.V&&(this.V=!1,this.Z=null,this.Y="",this.ra.run({measure:void 0,mutate:Eb},{bubbleElement:this.C}))}show(a,b){this.isActiveOn(a)&&b==this.Y||(this.V=!0,this.Z=a,this.Y=b,this.ra.run({measure:Fb,mutate:Gb},{message:b,targetElement:a,bubbleElement:this.C,viewport:this.ea,id:this.aa}))}}function Eb(a){a.bubbleElement.removeAttribute("aria-alert");a.bubbleElement.removeAttribute("role");for(var b=a.bubbleElement;b.firstChild;)b.removeChild(b.firstChild);Pa(a.bubbleElement,!1)}function Fb(a){a.targetRect=a.viewport.getLayoutRect(a.targetElement)}function Gb(a){for(var b=a.bubbleElement;b.firstChild;)b.removeChild(b.firstChild);let c=a.bubbleElement.ownerDocument.createElement("div");c.id=`bubble-message-${a.id}`;c.textContent=a.message;a.bubbleElement.setAttribute("aria-labeledby",c.id);a.bubbleElement.setAttribute("role","alert");a.bubbleElement.setAttribute("aria-live","assertive");a.bubbleElement.appendChild(c);Pa(a.bubbleElement,!0);b=a.bubbleElement;a={top:`${a.targetRect.top-10}px`,left:`${a.targetRect.left+a.targetRect.width/2}px`};for(let c in a)Oa(b,c,a[c])}let Hb,Mb,Nb=0;function Ob(a,b){I(b.elements,b=>{"TEXTAREA"==b.tagName&&a.checkInputValidity(b)})}class Pb{constructor(a){this.form=a;this.ampdoc=E(a);this.mutator=J(a);this.root=this.ampdoc.getRootNode();this.T=null}report(){}onBlur(){}onInput(){}inputs(){return this.form.querySelectorAll("input,select,textarea")}checkInputValidity(a){if("TEXTAREA"===a.tagName&&a.hasAttribute("pattern")&&(a.checkValidity()||"Please match the requested format."===a.validationMessage)){let b=a.getAttribute("pattern"),c=new RegExp(`^${b}$`,"m").test(a.value);a.setCustomValidity(c?"":"Please match the requested format.")}return a.checkValidity()}checkFormValidity(a){Ob(this,a);return a.checkValidity()}reportFormValidity(a){Ob(this,a);return a.reportValidity()}fireValidityEventIfNecessary(){let a=this.T;this.T=this.checkFormValidity(this.form);if(a!==this.T){let a=M(this.form.ownerDocument.defaultView,this.T?"valid":"invalid",null,{bubbles:!0});this.form.dispatchEvent(a)}}}class Qb extends Pb{report(){this.reportFormValidity(this.form);this.fireValidityEventIfNecessary()}}class Rb extends Pb{constructor(a){super(a);let b=`i-amphtml-validation-bubble-${Nb++}`;this.M=new Db(this.ampdoc,b)}report(){let a=this.inputs();for(let b=0;b<a.length;b++)if(!this.checkInputValidity(a[b])){a[b].focus();this.M.show(a[b],a[b].validationMessage);break}this.fireValidityEventIfNecessary()}onBlur(a){"submit"!=a.target.type&&this.M.hide()}onInput(a){a=a.target;this.M.isActiveOn(a)&&(this.checkInputValidity(a)?(a.removeAttribute("aria-invalid"),this.M.hide()):(a.setAttribute("aria-invalid","true"),this.M.show(a,a.validationMessage)))}}class Sb extends Pb{constructor(a){super(a);this.Fa=this.form.id?this.form.id:String(Date.now()+Math.floor(100*Math.random()));this.va=0}reportInput(a){let b=Tb(a);b&&this.showValidationFor(a,b)}hideAllValidations(){let a=this.inputs();for(let b=0;b<a.length;b++)this.hideValidationFor(a[b])}getValidationFor(a,b){if(!a.id)return null;var c=a.validationMessage;c="TEXTAREA"===a.tagName&&"customError"===b&&"Please match the requested format."===c?"patternMismatch":b;let d="__AMP_VALIDATION_"+c;d in a||(a[d]=this.root.querySelector(`[visible-when-invalid=${c}][validation-for=${a.id}]`));return a[d]}showValidationFor(a,b){let c=this.getValidationFor(a,b);if(c){c.textContent.trim()||(c.textContent=a.validationMessage);a.__AMP_VISIBLE_VALIDATION=c;var d=c.getAttribute("id");d||(d=`i-amphtml-aria-desc-${this.Fa}-${this.va++}`,c.setAttribute("id",d));a.setAttribute("aria-invalid","true");a.setAttribute("aria-describedby",d);this.mutator.mutateElement(c,()=>c.classList.add("visible"))}}hideValidationFor(a){let b=this.getVisibleValidationFor(a);b&&(delete a.__AMP_VISIBLE_VALIDATION,a.removeAttribute("aria-invalid"),a.removeAttribute("aria-describedby"),this.mutator.mutateElement(b,()=>b.classList.remove("visible")))}getVisibleValidationFor(a){return a.__AMP_VISIBLE_VALIDATION}shouldValidateOnInteraction(){throw Error("Not Implemented")}onInteraction(a){a=a.target;let b=!!a.checkValidity&&this.shouldValidateOnInteraction(a);this.hideValidationFor(a);b&&!this.checkInputValidity(a)&&this.reportInput(a)}onBlur(a){this.onInteraction(a)}onInput(a){this.onInteraction(a)}}class Ub extends Sb{report(){this.hideAllValidations();let a=this.inputs();for(let b=0;b<a.length;b++)if(!this.checkInputValidity(a[b])){this.reportInput(a[b]);a[b].focus();break}this.fireValidityEventIfNecessary()}shouldValidateOnInteraction(a){return!!this.getVisibleValidationFor(a)}}class Vb extends Sb{report(){this.hideAllValidations();let a=null;let b=this.inputs();for(let c=0;c<b.length;c++)this.checkInputValidity(b[c])||(a=a||b[c],this.reportInput(b[c]));a&&a.focus();this.fireValidityEventIfNecessary()}shouldValidateOnInteraction(a){return!!this.getVisibleValidationFor(a)}}class Wb extends Sb{shouldValidateOnInteraction(){return!0}onInteraction(a){super.onInteraction(a);this.fireValidityEventIfNecessary()}}class Xb extends Vb{shouldValidateOnInteraction(){return!0}onInteraction(a){super.onInteraction(a);this.fireValidityEventIfNecessary()}}function Yb(a){switch(a.getAttribute("custom-validation-reporting")){case"as-you-go":return new Wb(a);case"show-all-on-submit":return new Vb(a);case"interact-and-submit":return new Xb(a);case"show-first-on-submit":return new Ub(a)}a.ownerDocument&&void 0===Hb&&(Hb=!!document.createElement("form").reportValidity);return Hb?new Qb(a):new Rb(a)}function Tb(a){let b=["badInput"];for(var c in a.validity)b.includes(c)||b.push(c);c=b.filter(b=>!0===a.validity[b]);return c.length?c[0]:null}function Zb(a){var b=a.ownerDocument.defaultView;b.FormProxy||(b.FormProxy=$b(b));let c=new b.FormProxy(a);"action"in c||ac(a,c);a.$p=c}function $b(a){function b(a){this.h=a}let c=b.prototype,d=a.Object,e=d.prototype;[a.HTMLFormElement,a.EventTarget].reduce((a,b)=>{for(b=b&&b.prototype;b&&b!==e&&!(0<=a.indexOf(b));)a.push(b),b=d.getPrototypeOf(b);return a},[]).forEach(b=>{for(let d in b){let f=a.Object.getOwnPropertyDescriptor(b,d);if(f&&d.toUpperCase()!=d&&!z(d,"on")&&!e.hasOwnProperty.call(c,d))if("function"==typeof f.value){let a=f.value;c[d]=function(){return a.apply(this.h,arguments)}}else{let b={};f.get&&(b.get=function(){return f.get.call(this.h)});f.set&&(b.set=function(a){return f.set.call(this.h,a)});a.Object.defineProperty(c,d,b)}}});return b}function ac(a,b){var c=a.ownerDocument.defaultView.HTMLFormElement.prototype.cloneNode.call(a,!1);for(let d in c){if(d in b||d.toUpperCase()==d||z(d,"on"))continue;let e=bc[d],f=a[d];if(e){if(e.access==P){let e;if(f&&f.nodeType){c=f;let b=c.nextSibling,g=c.parentNode;g.removeChild(c);try{e=a[d]}finally{g.insertBefore(c,b)}}else e=f;Object.defineProperty(b,d,{get(){return e}})}else if(e.access==Q){let c=e.attr||d;Object.defineProperty(b,d,{get(){var d=b.getAttribute(c);return null==d&&void 0!==e.def?e.def:e.type==cc?"true"===d:e.type==R?null!=d:e.type==dc?(d=d||"",C(a,"url").parse(d).href):d},set(a){e.type==R&&(a=a?"":null);null!=a?b.setAttribute(c,a):b.removeAttribute(c)}})}}else Object.defineProperty(b,d,{get(){return a[d]},set(b){a[d]=b}})}}var Q=1,P=2,dc=1,cc=2,R=3;let bc={acceptCharset:{access:Q,attr:"accept-charset"},accessKey:{access:Q,attr:"accesskey"},action:{access:Q,type:dc},attributes:{access:P},autocomplete:{access:Q,def:"on"},children:{access:P},dataset:{access:P},dir:{access:Q},draggable:{access:Q,type:cc,def:!1},elements:{access:P},encoding:{access:P},enctype:{access:Q},hidden:{access:Q,type:R,def:!1},id:{access:Q,def:""},lang:{access:Q},localName:{access:P},method:{access:Q,def:"get"},name:{access:Q},noValidate:{access:Q,attr:"novalidate",type:R,def:!1},prefix:{access:P},spellcheck:{access:Q},style:{access:P},target:{access:Q,def:""},title:{access:Q},translate:{access:Q}};function ec(a,b){let c=a.getHeadNode(),d=fc(c,gc(c));if(b){let c=a.getRootNode();if(hc(c,d))b(d);else var e=setInterval(()=>{hc(c,d)&&(clearInterval(e),b(d))},4)}}function fc(a,b){let c=a.__AMP_CSS_SM;c||(c=a.__AMP_CSS_SM=x());{let d=ic(a,c,"amp-extension=amp-form");if(d)return d.textContent!==b&&(d.textContent=b),d}let d=(a.ownerDocument||a).createElement("style");d.textContent=b;let e=null;d.setAttribute("amp-extension","amp-form");e=ic(a,c,"amp-runtime");Ja(a,d,e);return c["amp-extension=amp-form"]=d}function ic(a,b,c){return b[c]?b[c]:(a=a.querySelector(`style[${c}]`))?b[c]=a:null}function gc(a){return(a=a.__AMP_CSS_TR)?a('form.amp-form-submit-error [submit-error],form.amp-form-submit-success [submit-success],form.amp-form-submitting [submitting]{display:block}textarea[autoexpand]:not(.i-amphtml-textarea-max){overflow:hidden!important}.i-amphtml-textarea-clone{visibility:hidden;position:absolute;top:-9999px;left:-9999px;height:0!important}.i-amphtml-validation-bubble{transform:translate(-50%,-100%);background-color:#fff;box-shadow:0 5px 15px 0 rgba(0,0,0,0.5);max-width:200px;position:absolute;display:block;box-sizing:border-box;padding:10px;border-radius:5px}.i-amphtml-validation-bubble:after{content:" ";position:absolute;bottom:-8px;left:30px;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #fff}[visible-when-invalid]{color:red}\n/*# sourceURL=/extensions/amp-form/0.1/amp-form.css*/'):'form.amp-form-submit-error [submit-error],form.amp-form-submit-success [submit-success],form.amp-form-submitting [submitting]{display:block}textarea[autoexpand]:not(.i-amphtml-textarea-max){overflow:hidden!important}.i-amphtml-textarea-clone{visibility:hidden;position:absolute;top:-9999px;left:-9999px;height:0!important}.i-amphtml-validation-bubble{transform:translate(-50%,-100%);background-color:#fff;box-shadow:0 5px 15px 0 rgba(0,0,0,0.5);max-width:200px;position:absolute;display:block;box-sizing:border-box;padding:10px;border-radius:5px}.i-amphtml-validation-bubble:after{content:" ";position:absolute;bottom:-8px;left:30px;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #fff}[visible-when-invalid]{color:red}\n/*# sourceURL=/extensions/amp-form/0.1/amp-form.css*/'}function hc(a,b){let c=a.styleSheets;for(a=0;a<c.length;a++)if(c[a].ownerNode==b)return!0;return!1}function jc(a){let b=a.documentElement;return["âš¡4email","amp4email"].some(a=>b.hasAttribute(a))}function kc(a,b,c={}){Ma(a,"amp-analytics-instrumentation","amp-analytics").then(d=>{d&&d.triggerEventForTarget(a,b,c,!0)})}function lc(a,b){try{return JSON.parse(a)}catch(c){return b&&b(c),null}}let mc=["amp-selector"];function nc(a,b){let c=a.h.getAttribute(b);if(c){let d=C(a.h,"url");d.assertHttpsUrl(c,a.h,b);w(!d.isProxyOrigin(c),"form %s should not be on AMP CDN: %s",b,a.h)}return c}function oc(a){let b=a.h.getAttribute("enctype");if("application/x-www-form-urlencoded"===b||"multipart/form-data"===b)return b;null!==b&&t().warn("amp-form",`Unexpected enctype: ${b}. Defaulting to 'multipart/form-data'.`);return"multipart/form-data"}function pc(a){if("submitting"===a.B)return m();S(a,"verifying");T(a,"verify",null,3);return qc(a,rc(a)).then(()=>sc(a))}function tc(a){Ma(a.h,"inputmask","amp-inputmask").then(a=>{a&&a.install()})}function uc(a){if(!ya(a.j.location)&&a.h.hasAttribute("data-initialize-from-url")){var b=["SELECT","TEXTAREA"],c="color date datetime-local email hidden month number range search tel text time url week".split(" "),d=["checkbox","radio"],e=(a,e)=>{if(!a.hasAttribute("data-amp-replace")&&a.hasAttribute("data-allow-initialization")){e=f[e]||"";var g=a.getAttribute("type")||"text",h=a.tagName;"INPUT"===h?c.includes(g.toLocaleLowerCase())?a.value!==e&&(a.value=e):d.includes(g)&&(e=a.value===e,a.checked!==e&&(a.checked=e)):b.includes(h)&&a.value!==e&&(a.value=e)}},f=n(a.j.location.search);Object.keys(f).forEach(b=>{let c=a.h.elements[b];c&&(c.nodeType===Node.ELEMENT_NODE?e(c,b):c.length&&I(c,a=>e(a,b)))})}}function vc(a){let b=a.h.querySelectorAll("input[type=password],input[type=file]");w(0==b.length,"input[type=password] or input[type=file] may only appear in form[method=post]")}function wc(a){if(a.$)return a.$;let b=a.h.querySelectorAll(mc.join(",")),c=da(b).map(a=>a.whenBuilt());return a.$=xc(a,c,2e3)}function yc(a){a.h.reset();S(a,"initial");a.h.classList.remove("user-valid");a.h.classList.remove("user-invalid");let b=a.h.querySelectorAll(".user-valid, .user-invalid");I(b,a=>{a.classList.remove("user-valid");a.classList.remove("user-invalid")});let c=a.h.querySelectorAll(".visible[validation-for]");I(c,a=>{a.classList.remove("visible")});zc(a.h)}function xc(a,b,c){return Promise.race([Promise.all(b),a.Ea.promise(c)])}function S(a,b){let c=a.B;a.h.classList.remove(`amp-form-${c}`);a.h.classList.add(`amp-form-${b}`);var d=a.h.querySelector(`[${c}]`);if(d){/^[\w-]+$/.test("i-amphtml-rendered");if(void 0!==Ia)var e=Ia;else{try{let a=d.ownerDocument,b=a.createElement("div"),c=a.createElement("div");b.appendChild(c);e=b.querySelector(":scope div")===c}catch(f){e=!1}e=Ia=e}e?d=d.querySelector("> [i-amphtml-rendered]".replace(/^|,/g,"$&:scope ")):(d.classList.add("i-amphtml-scoped"),e="> [i-amphtml-rendered]".replace(/^|,/g,"$&.i-amphtml-scoped "),e=d.querySelectorAll(e),d.classList.remove("i-amphtml-scoped"),d=e,d=void 0===d[0]?null:d[0]);d&&d.parentElement&&d.parentElement.removeChild(d)}a.B=b}function U(a,b){Array.isArray(b)&&(b={},t().warn("amp-form",`Unexpected data type: ${b}. Expected non JSON array.`));let c=a.h.querySelector(`[${a.B}]`);let d=m();if(c){let e=`rendered-message-${a.aa}`;c.setAttribute("role","alert");c.setAttribute("aria-labeledby",e);c.setAttribute("aria-live","assertive");a.m.hasTemplate(c)?d=a.K.applySsrOrCsrTemplate(c,b).then(b=>{b.id=e;b.setAttribute("i-amphtml-rendered","");return a.ja.mutateElement(c,()=>{c.appendChild(b);let d=M(a.j,"amp:dom-update",null,{bubbles:!0});c.dispatchEvent(d)})}):a.ja.mutateElement(c,()=>{})}return d}function T(a,b,c,d){c=M(a.j,`amp-form.${b}`,y({response:c}));a.H.trigger(a.h,b,c,d)}function V(a,b){let c=a.K.isEnabled();w(!1===c,"[amp-form]: viewerRenderTemplate | %s",b)}function W(a,b){V(a,"Form analytics not supported");let c=y({}),d=N(a.h);for(let a in d)Object.prototype.hasOwnProperty.call(d,a)&&(c["formFields["+a+"]"]=d[a].join(","));c.formId=a.h.id;kc(a.h,b,c)}function Ac(a){void 0===Mb&&(Mb=!!a.j.document.createElement("input").checkValidity);if(Mb){let b=Bc(a.h);if(a.oa)return a.N.report(),b}return!0}function Cc(a,b,c){try{let b={form:a.h,actionXhrMutator:a.setXhrAction.bind(a)};a.ga.fire(b)}catch(h){v().error("amp-form","Form submit service failed: %s",h)}let d=rc(a),e=a.h.getElementsByClassName("i-amphtml-async-input");a.R.onSubmitting();if(!a.G&&"GET"==a.A){V(a,"Non-XHR GETs not supported.");vc(a);if(0===e.length){for(let b=0;b<d.length;b++)a.pa.expandInputValueSync(d[b]);Dc(a,!c);a.R.onSubmitSuccess();return m()}c&&c.preventDefault()}S(a,"submitting");let f=[],g=[];g.push(qc(a,d));I(e,b=>{let c=Ec(a,b);b.classList.contains("i-async-require-action")?f.push(c):g.push(c)});return Promise.all(f).then(()=>xc(a,g,1e4).then(()=>{if(a.G)var c=Fc(a,b);else"POST"==a.A?w(!1,"Only XHR based (via action-xhr attribute) submissions are supported for POST requests. %s",a.h):"GET"==a.A&&Dc(a,!0),c=m();return c},c=>Gc(a,c,b)),c=>Gc(a,c,b))}function rc(a){return a.h.querySelectorAll('[type="hidden"][data-amp-replace]')}function Dc(a,b){W(a,"amp-form-submit");b&&a.h.submit();S(a,"initial")}function qc(a,b){let c=[];for(let d=0;d<b.length;d++)c.push(a.pa.expandInputValueAsync(b[d]));return xc(a,c,100)}function Ec(a,b){return b.getImpl().then(a=>a.getValue()).then(c=>{var d=b.getAttribute("name");d=a.h.querySelector(`input[name=${CSS.escape(d)}]`);if(!d){d=y({name:b.getAttribute("name"),hidden:"true"});var e=a.j.document.createElement("input");for(let a in d)e.setAttribute(a,d[a]);d=e}d.setAttribute("value",c);a.h.appendChild(d)})}function Gc(a,b,c){let d={};b&&b.message&&(d.error=b.message);return X(a,b,d,c)}function X(a,b,c,d,e){S(a,"submit-error");t().error("amp-form","Form submission failed: %s",b);return ja(()=>{U(a,c).then(()=>{let b=Hc(a,d);T(a,"submit-error",void 0===e?c:e,b);a.R.onSubmitError()})})}function Fc(a,b){let c;a.K.isEnabled()?c=Ic(a,b):(Jc(a,b),c=a.S(a.G,a.A).then(c=>Kc(a,c,b),c=>Lc(a,c,b)));return c}function sc(a){let b=da(a.h.querySelectorAll(`[${CSS.escape("no-verify")}]`)).map(a=>a.name||a.id);return a.S(a.Ja,a.A,{["__amp_form_verify"]:!0},b)}function Ic(a,b){let c;let d=N(a.h);return U(a,d).then(()=>a.H.trigger(a.h,"submit",null,b)).then(()=>a.requestForFormFetch(a.G,a.A)).then(b=>{var d=c=b;var e=c.fetchOpt||{};var h=e.method;void 0===h?h="GET":(h=h.toUpperCase(),zb.includes(h));e.method=h;e.headers=e.headers||y({});d.fetchOpt=e;d=c;h=c.xhrUrl;e=(e=c.fetchOpt)||{};var k=a.j;k=k.origin||A(k.location.href).origin;h=A(h).origin;k==h&&(e.headers=e.headers||{},e.headers["AMP-Same-Origin"]="true");d.fetchOpt=e;d=c;h=a.j;e=c.xhrUrl;if(!1!==c.fetchOpt.ampCors){k=A(e);k=n(k.search);w(!("__amp_source_origin"in k),"Source origin is not allowed in %s",e);h=h.location.href;"string"==typeof h&&(h=A(h));if(ya(h)){k=h.pathname.split("/");w(oa[k[1]],"Unknown path prefix in url %s",h.href);var r=k[2],u="s"==r?"https://"+decodeURIComponent(k[3]):"http://"+decodeURIComponent(r);w(0<u.indexOf("."),"Expected a . in origin %s",u);k.splice(1,"s"==r?3:2);k=u+k.join("/");r=(r=h.search)&&"?"!=r?(r=r.replace(ra,"").replace(sa,"").replace(ta,"").replace(ua,"").replace(va,"").replace(/^[?&]/,""))?"?"+r:"":"";h=k+r+(h.hash||"")}else h=h.href;h=A(h).origin;h=`${encodeURIComponent("__amp_source_origin")}=${encodeURIComponent(h)}`;e=wa(e,h,void 0)}d.xhrUrl=e;return a.K.ssr(a.h,c,Mc(a))}).then(c=>Nc(a,c,b),c=>{let d={};c&&c.message&&(d.error=c.message);return X(a,c,d,b)})}function Jc(a,b){W(a,"amp-form-submit");let c=N(a.h);U(a,c).then(()=>{a.H.trigger(a.h,"submit",null,b)})}function Kc(a,b,c){return a.fa.xssiJson(b,a.getXssiPrefix()).then(b=>Oc(a,b,c),a=>t().error("amp-form","Failed to parse response JSON: %s",a)).then(()=>{W(a,"amp-form-submit-success");Pc(a,b)})}function Lc(a,b,c){return(b&&b.response?a.fa.xssiJson(b.response,a.getXssiPrefix()).catch(()=>null):Promise.resolve(null)).then(d=>{W(a,"amp-form-submit-error");X(a,b,d,c);Pc(a,b.response)})}function Mc(a){let b;let c=a.h.querySelector("[submit-success]");c&&(b=a.m.maybeFindTemplate(c));let d;let e=a.h.querySelector("[submit-error]");e&&(d=a.m.maybeFindTemplate(e));return{successTemplate:b,errorTemplate:d}}function Nc(a,b,c){var d=b.init;let e=lc(b.body,a=>t().error("amp-form","Failed to parse response JSON: %s",a));return d&&(d=d.status,300<=d)?X(a,d,b,c,e):Oc(a,b,c,e)}function Oc(a,b,c,d){S(a,"submit-success");return ja(()=>{U(a,b||{}).then(()=>{let e=Hc(a,c);T(a,"submit-success",void 0===d?b:d,e);a.R.onSubmitSuccess()})})}function Hc(a,b){2>=b&&v().expectedError("amp-form","Recursive form submissions are scheduled to be deprecated by 1/1/2020. See https://github.com/ampproject/amphtml/issues/24894.");return a.ia?b-1:b}function Pc(a,b){V(a,"Redirects not supported.");if(b&&b.headers){var c=b.headers.get("AMP-Redirect-To");if(c){w(!a.ia,"Redirects not supported in AMP4Email.",a.h);w("_blank"!=a.Da,"Redirecting to target=_blank using AMP-Redirect-To is currently not supported, use target=_top instead. %s",a.h);try{let b=C(a.h,"url");b.assertAbsoluteHttpOrHttpsUrl(c);b.assertHttpsUrl(c,"AMP-Redirect-To","Url")}catch(d){w(!1,"The `AMP-Redirect-To` header value must be an absolute URL starting with https://. Found %s",c)}H(a.h,"navigation").navigateTo(a.j,c,"AMP-Redirect-To")}}}class Qc{constructor(a,b){try{Zb(a)}catch(c){v().error("amp-form","form proxy failed to install",c)}a.__AMP_FORM=this;this.aa=b;this.J=a.ownerDocument;this.j=this.J.defaultView;this.Ea=G(this.j,"timer");this.pa=C(a,"url-replace");this.$=null;this.h=a;this.ua=E(this.h);this.m=G(this.j,"templates");this.fa=G(this.j,"xhr");this.H=C(this.h,"action");this.ja=J(this.h);this.F=H(this.h,"viewer");this.K=new Cb("amp-form",this.F,this.m);this.A=(this.h.getAttribute("method")||"GET").toUpperCase();this.Da=this.h.getAttribute("target");this.G=nc(this,"action-xhr");this.Ja=nc(this,"verify-xhr");this.xa=oc(this);this.oa=!this.h.hasAttribute("novalidate");this.h.setAttribute("novalidate","");this.oa||this.h.setAttribute("amp-novalidate","");this.h.classList.add("i-amphtml-form");this.B="initial";b=this.h.elements;for(let a=0;a<b.length;a++){let{name:c}=b[a];w("__amp_source_origin"!=c&&"__amp_form_verify"!=c,"Illegal input name, %s found: %s",c,b[a])}this.R=new ub(this.h,this.j);this.N=Yb(this.h);this.Ga=gb(this.h,()=>pc(this));this.H.addToAllowlist("FORM",["clear","submit"],["email"]);this.H.installActionHandler(this.h,this.ta.bind(this));this.ba();tc(this);uc(this);this.ga=this.Aa=this.Ia=null;Fa(F(a),"form-submit-service").then(a=>{this.ga=a});this.ia=this.J&&jc(this.J)}getXssiPrefix(){return this.h.getAttribute("xssi-prefix")}requestForFormFetch(a,b,c,d){let e,f,g=y({Accept:"application/json"});if("GET"==b||"HEAD"==b){vc(this);let b=N(this.h);d&&d.forEach(a=>delete b[a]);c&&ma(b,c);e=wa(a,xa(b))}else{e=a;"application/x-www-form-urlencoded"===this.xa?(f=xa(N(this.h)),g=y({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"})):f=ob(this.j,this.h);d&&d.forEach(a=>f.delete(a));for(let a in c)f.append(a,c[a])}let h={xhrUrl:e,fetchOpt:y({body:f,method:b,credentials:"include",headers:g})};return Ab(this.h).then(a=>{a&&(w("POST"==h.fetchOpt.method,"Cannot attach auth token with GET request."),f.append("ampViewerAuthToken",a));return h})}setXhrAction(a){this.G=a}ta(a){if(!a.satisfiesTrust(2))return null;if("submit"==a.method)return wc(this).then(()=>"submitting"!=this.B&&Ac(this)?Cc(this,a.trust,null):Promise.resolve(null));"clear"===a.method&&yc(this);return null}ba(){this.ua.whenNextVisible().then(()=>{let a=this.h.querySelector("[autofocus]");if(a)try{a.focus()}catch(b){}});this.h.addEventListener("submit",this.ha.bind(this),!0);this.h.addEventListener("blur",a=>{Y(a.target);this.N.onBlur(a)},!0);this.h.addEventListener("amp:form-value-change",a=>{Y(a.target);this.N.onInput(a)},!0);this.K.isEnabled()||this.h.addEventListener("change",a=>{this.Ga.onCommit().then(b=>{let c=b.errors;b.updatedElements.forEach(Y);this.N.onBlur(a);"verifying"===this.B&&(c.length?(S(this,"verify-error"),U(this,y({verifyErrors:c})).then(()=>{T(this,"verify-error",c,2)})):S(this,"initial"))})});this.h.addEventListener("input",a=>{Y(a.target);this.N.onInput(a)})}ha(a){if("submitting"==this.B||!Ac(this))return a.stopImmediatePropagation(),a.preventDefault(),Promise.resolve(null);(this.G||"POST"==this.A)&&a.preventDefault();return Cc(this,3,a)}S(a,b,c,d){V(this,"XHRs should be proxied.");return this.requestForFormFetch(a,b,c,d).then(a=>this.fa.fetch(a.xhrUrl,a.fetchOpt))}Ka(){return this.Aa}La(){return this.Ia}}function Bc(a){let b=a.querySelectorAll("input,select,textarea,fieldset");I(b,a=>Z(a));return Z(a)}function zc(a){let b=document.createElement("input");for(let c in b.validity){let b=a.querySelectorAll(`.${CSS.escape(c)}`);I(b,a=>{a.classList.remove(c)})}}function Z(a,b=!1){if(!a.checkValidity)return!0;let c=!1;var d=a.classList.contains("user-valid")?"valid":a.classList.contains("user-invalid")?"invalid":"none";let e=a.checkValidity();"valid"!=d&&e?(a.classList.add("user-valid"),a.classList.remove("user-invalid"),c="invalid"==d):"invalid"==d||e||(a.classList.add("user-invalid"),a.classList.remove("user-valid"),c=!0);if(a.validity)for(var f in a.validity)a.classList.toggle(f,a.validity[f]);if(b&&c){d=La(a);for(f=0;f<d.length;f++)Z(d[f]);a.form&&Z(a.form)}return e}function Y(a){Z(a,!0)}function Rc(a){let b=new ia;ec(a,b.resolve);return b.promise}function Sc(a){return a.whenReady().then(()=>{let b=a.getRootNode();Tc(b.querySelectorAll("form"));Wa(a);Uc(b);Vc(b)})}function Tc(a){a&&I(a,(a,c)=>{a.__AMP_FORM||new Qc(a,`amp-form-${c}`)})}function Uc(a){a.addEventListener("amp:dom-update",()=>{Tc(a.querySelectorAll("form"))})}function Vc(a){a.addEventListener("keydown",a=>{if(!a.defaultPrevented&&"Enter"==a.key&&(a.ctrlKey||a.metaKey)&&"TEXTAREA"===a.target.tagName){var b=a.target.form,d=b?b.__AMP_FORM||null:null;d&&(d.ha(a),a.preventDefault())}})}class Wc{constructor(a){this.Ha=Rc(a).then(()=>Sc(a))}whenInitialized(){return this.Ha}}(a=>{a.registerServiceForDoc("form-submit-service",wb);a.registerServiceForDoc("amp-form",Wc)})(self.AMP)}});