

# TODO

## nott.ac.uk [G53OPS - Operating Systems](http://www.cs.nott.ac.uk/~pszgxk/courses/g53ops/Memory%20Management/MM04-relocation.html)

### Relocation and Protection

As soon as we introduce multiprogramming we have two problems that we need to address.

**Relocation** : When a program is run it does not know in advance what **location** it will be loaded at. Therefore, the program cannot simply generate static addresses (e.g. from jump instructions). Instead, they must be made relative to where the program has been loaded.

***SUMMARY*** : 在编译阶段，编译器是无法得知其生成的executable在运行时的location的，因此编译器生成的executable不能够使用static address，它只能够使用relative address；编译器实现relative address的方式是使用symbol。这是使用relocation的原因。

**Protection** : Once you can have two programs in memory at the same time there is a danger that one program can write to the address space of another program. This is obviously dangerous and should be avoided.

In order to cater(迎合) for **relocation** we could make the **loader** modify all the relevant addresses as the binary file is loaded. The OS/360 worked in this way but the scheme suffers from the following problems

> · The program cannot be moved, after it has been loaded without going through the same process.
> · Using this scheme does not help the protection problem as the program can still generate illegal addresses (maybe by using absolute addressing).
> · The program needs to have some sort of **map** that tells the **loader** which addresses need to be modified.

***SUMMARY*** : 上面这段话介绍的内容指出了是由**loader**来执行relocation，以及执行的时机。它还涉及到了relocation的一些实现方法，如引入relocation table。

A solution, which solves both the relocation and protection problem is to equip(配备) the machine with two registers called the ***base*** and ***limit*** registers.

The **base register** stores the start address of the partition and the limit register holds the length of the partition. Any address that is generated by the program has the base register added to it. In addition, all addresses are checked to ensure they are within the range of the partition.

An additional benefit of this scheme is that if a program is moved within memory, only its base register needs to be amended. This is obviously a lot quicker than having to modify every address reference within the program.

The IBM PC uses a scheme similar to this, although it does not have a limit register.

## stackexchange [What does 'relocation' mean?](https://cs.stackexchange.com/questions/86653/what-does-relocation-mean)

