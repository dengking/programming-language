<!DOCTYPE html>
<!-- saved from url=(0082)https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/ -->
<html lang="en" class="wf-gentiumbookbasic-n7-inactive wf-gentiumbookbasic-i4-inactive wf-gentiumbookbasic-i7-inactive wf-gentiumbookbasic-n4-inactive wf-inactive"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script async="" src="https://graph.facebook.com/?callback=WPCOMSharing.update_facebook_count&amp;ids=https%3A%2F%2Fdavmac.wordpress.com%2F2018%2F04%2F03%2Funderstanding-the-c-c-memory-model-part-2%2F&amp;_=1598350024574"></script>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">

<title>Understanding the C/C++ memory model – part 2 – Software is Crap</title>
<script src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/webfont.js.download" type="text/javascript" async=""></script><script type="text/javascript">
  WebFontConfig = {"google":{"families":["Gentium+Book+Basic:r,i,b,bi:latin,latin-ext"]}};
  (function() {
    var wf = document.createElement('script');
    wf.src = 'https://s0.wp.com/wp-content/plugins/custom-fonts/js/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><link rel="stylesheet" href="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/css" media="all"><style id="jetpack-custom-fonts-css">.wf-active code, .wf-active kbd, .wf-active pre, .wf-active samp{font-family:"Gentium Book Basic",serif}.wf-active body{font-family:"Gentium Book Basic",serif}.wf-active button, .wf-active input, .wf-active select{font-family:"Gentium Book Basic",serif}.wf-active textarea{font-family:"Gentium Book Basic",serif}.wf-active blockquote{font-family:"Gentium Book Basic",serif}.wf-active code, .wf-active kbd, .wf-active pre, .wf-active tt, .wf-active var{font-family:"Gentium Book Basic",serif}.wf-active .button, .wf-active .more-link, .wf-active button:not(.menu-toggle), .wf-active input[type="button"], .wf-active input[type="reset"], .wf-active input[type="submit"], .wf-active .posts-navigation .nav-links a, .wf-active #content #infinite-handle span button{font-family:"Gentium Book Basic",serif}.wf-active input[type="email"], .wf-active input[type="password"], .wf-active input[type="search"], .wf-active input[type="text"], .wf-active input[type="url"], .wf-active textarea{font-family:"Gentium Book Basic",serif}.wf-active .post-navigation{font-family:"Gentium Book Basic",serif}.wf-active .main-navigation{font-family:"Gentium Book Basic",serif}.wf-active .entry-content, .wf-active .entry-summary, .wf-active .page-content{font-family:"Gentium Book Basic",serif}.wf-active .entry-content .subtitle{font-family:"Gentium Book Basic",serif}.wf-active #comments{font-family:"Gentium Book Basic",serif}.wf-active .comment-form label{font-family:"Gentium Book Basic",serif}.wf-active .comment-form span.required{font-family:"Gentium Book Basic",serif}.wf-active .widget_recent_entries span.post-date{font-family:"Gentium Book Basic",serif}.wf-active .site-description{font-family:"Gentium Book Basic",serif}.wf-active .site-posted-on time{font-family:"Gentium Book Basic",serif}.wf-active .page-header:not(.page-header-light) .taxonomy-description{font-family:"Gentium Book Basic",serif}.wf-active .light-text{font-family:"Gentium Book Basic",serif}.wf-active .site-info{font-family:"Gentium Book Basic",serif}.wf-active .sticky-label{font-family:"Gentium Book Basic",serif}.wf-active .post-details, .wf-active .post-details a{font-family:"Gentium Book Basic",serif}.wf-active .page-links{font-family:"Gentium Book Basic",serif}.wf-active .post-edit-link{font-family:"Gentium Book Basic",serif}.wf-active .post-author-card .author-description{font-family:"Gentium Book Basic",serif}</style>
<link rel="dns-prefetch" href="https://s0.wp.com/">
<link rel="dns-prefetch" href="https://s.pubmine.com/">
<link rel="dns-prefetch" href="https://x.bidswitch.net/">
<link rel="dns-prefetch" href="https://static.criteo.net/">
<link rel="dns-prefetch" href="https://ib.adnxs.com/">
<link rel="dns-prefetch" href="https://aax.amazon-adsystem.com/">
<link rel="dns-prefetch" href="https://bidder.criteo.com/">
<link rel="dns-prefetch" href="https://cas.criteo.com/">
<link rel="dns-prefetch" href="https://gum.criteo.com/">
<link rel="dns-prefetch" href="https://ads.pubmatic.com/">
<link rel="dns-prefetch" href="https://gads.pubmatic.com/">
<link rel="dns-prefetch" href="https://tpc.googlesyndication.com/">
<link rel="dns-prefetch" href="https://ad.doubleclick.net/">
<link rel="dns-prefetch" href="https://googleads.g.doubleclick.net/">
<link rel="dns-prefetch" href="https://www.googletagservices.com/">
<link rel="dns-prefetch" href="https://cdn.switchadhub.com/">
<link rel="dns-prefetch" href="https://delivery.g.switchadhub.com/">
<link rel="dns-prefetch" href="https://delivery.swid.switchadhub.com/">
<link rel="dns-prefetch" href="https://a.teads.tv/">
<link rel="dns-prefetch" href="https://prebid.media.net/">
<link rel="dns-prefetch" href="https://adserver-us.adtech.advertising.com/">
<link rel="dns-prefetch" href="https://fastlane.rubiconproject.com/">
<link rel="dns-prefetch" href="https://prebid-server.rubiconproject.com/">
<link rel="dns-prefetch" href="https://hb-api.omnitagjs.com/">
<link rel="dns-prefetch" href="https://mtrx.go.sonobi.com/">
<link rel="dns-prefetch" href="https://apex.go.sonobi.com/">
<link rel="dns-prefetch" href="https://u.openx.net/">
<link rel="alternate" type="application/rss+xml" title="Software is Crap » Feed" href="https://davmac.wordpress.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Software is Crap » Comments Feed" href="https://davmac.wordpress.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Software is Crap » Understanding the C/C++ memory model – part 2 Comments Feed" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/feed/">
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s0.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1596548281h&ver=5.5-wpcom-484371"}};
			!function(e,a,t){var r,n,o,i,p=a.createElement("canvas"),s=p.getContext&&p.getContext("2d");function c(e,t){var a=String.fromCharCode;s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,e),0,0);var r=p.toDataURL();return s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,t),0,0),r===p.toDataURL()}function l(e){if(!s||!s.fillText)return!1;switch(s.textBaseline="top",s.font="600 32px Arial",e){case"flag":return!c([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])&&(!c([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!c([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]));case"emoji":return!c([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}function d(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(i=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},o=0;o<i.length;o++)t.supports[i[o]]=l(i[o]),t.supports.everything=t.supports.everything&&t.supports[i[o]],"flag"!==i[o]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[i[o]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(r=t.source||{}).concatemoji?d(r.concatemoji):r.wpemoji&&r.twemoji&&(d(r.twemoji),d(r.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/wp-emoji-release.min.js.download" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" id="all-css-0-1" href="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/saved_resource(1)" type="text/css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify {
	text-align:justify;
}
</style>
<style id="global-styles-inline-css">
:root {
	--wp--preset--color--medium-blue: #0087be;
	--wp--preset--color--bright-blue: #00aadc;
	--wp--preset--color--dark-gray: #4d4d4b;
	--wp--preset--color--light-gray: #b3b3b1;
	--wp--preset--color--white: #fff;
	--wp--preset--font-size--small: 13;
	--wp--preset--font-size--normal: 16;
	--wp--preset--font-size--medium: 20;
	--wp--preset--font-size--large: 36;
	--wp--preset--font-size--huge: 48;
	--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);
	--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);
	--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);
	--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);
	--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);
	--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);
	--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);
	--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);
	--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);
	--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);
	--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);
	--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);
}

</style>
<link rel="stylesheet" id="all-css-2-1" href="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/saved_resource(2)" type="text/css" media="all">
<style id="independent-publisher-2-style-inline-css">
#hero-header { background: url("https://davmac.files.wordpress.com/2018/12/matrix-bg.png") no-repeat center; background-size: cover; background-attachment: scroll; }
</style>
<link rel="stylesheet" id="print-css-3-1" href="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/global-print.css" type="text/css" media="print">
<link rel="stylesheet" id="all-css-4-1" href="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/actionbar.css" type="text/css" media="all">
<style id="jetpack-global-styles-frontend-style-inline-css">
:root { --font-headings: unset; --font-base: unset; --font-headings-default: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif; --font-base-default: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;}
</style>
<link rel="stylesheet" id="all-css-6-1" href="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/saved_resource(3)" type="text/css" media="all">
<script id="jetpack_related-posts-js-extra">
var related_posts_js_options = {"post_heading":"h4"};
</script>
<script type="text/javascript" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/saved_resource(4)"></script>
<link rel="stylesheet" id="all-css-0-2" href="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/style(1).css" type="text/css" media="all">
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='https://s0.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1351637563h&#038;ver=20110606' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://davmac.wordpress.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s0.wp.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Understanding the C/C++ memory model" href="https://davmac.wordpress.com/2018/01/28/understanding-the-c-c-memory-model/">
<link rel="next" title="Escape from System D, episode V" href="https://davmac.wordpress.com/2018/06/21/escape-from-system-d-episode-v/">
<meta name="generator" content="WordPress.com">
<link rel="canonical" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/">
<link rel="shortlink" href="https://wp.me/p2VUr-Fz">
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/?format=json&amp;url=https%3A%2F%2Fdavmac.wordpress.com%2F2018%2F04%2F03%2Funderstanding-the-c-c-memory-model-part-2%2F&amp;for=wpcom-auto-discovery"><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/?format=xml&amp;url=https%3A%2F%2Fdavmac.wordpress.com%2F2018%2F04%2F03%2Funderstanding-the-c-c-memory-model-part-2%2F&amp;for=wpcom-auto-discovery">
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="Understanding the C/C++ memory model – part 2">
<meta property="og:url" content="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/">
<meta property="og:description" content="My previous blog post, Understanding the C/C++ memory model, got more (and still receives more) attention than I ever thought it would, so I feel obliged to add a follow up to expand on the topic a…">
<meta property="article:published_time" content="2018-04-02T16:20:51+00:00">
<meta property="article:modified_time" content="2018-04-03T18:43:22+00:00">
<meta property="og:site_name" content="Software is Crap">
<meta property="og:image" content="https://davmac.files.wordpress.com/2018/04/acquire-release-svg.png">
<meta property="og:image:width" content="672">
<meta property="og:image:height" content="317">
<meta property="og:locale" content="en_US">
<meta name="twitter:site" content="@wordpressdotcom">
<meta name="twitter:text:title" content="Understanding the C/C++ memory model – part 2">
<meta name="twitter:image" content="https://davmac.files.wordpress.com/2018/04/acquire-release-svg.png?w=640">
<meta name="twitter:card" content="summary_large_image">
<meta property="fb:app_id" content="249643311490">
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom">

<!-- End Jetpack Open Graph Tags -->
<link rel="shortcut icon" type="image/x-icon" href="https://s0.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48">
<link rel="icon" type="image/x-icon" href="https://s0.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48">
<link rel="apple-touch-icon" href="https://s0.wp.com/i/webclip.png">
<link rel="openid.server" href="https://davmac.wordpress.com/?openidserver=1">
<link rel="openid.delegate" href="https://davmac.wordpress.com/">
<link rel="search" type="application/opensearchdescription+xml" href="https://davmac.wordpress.com/osd.xml" title="Software is Crap">
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com">
<meta name="theme-color" content="#ffffff">
<link rel="pingback" href="https://davmac.wordpress.com/xmlrpc.php"><meta name="application-name" content="Software is Crap"><meta name="msapplication-window" content="width=device-width;height=device-height"><meta name="msapplication-tooltip" content="Bugs, design failures, and neglected documentation. Let&#39;s do better."><meta name="msapplication-task" content="name=Subscribe;action-uri=https://davmac.wordpress.com/feed/;icon-uri=https://s0.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s0.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s0.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s0.wp.com/i/favicon.ico"><meta name="description" content="My previous blog post, Understanding the C/C++ memory model, got more (and still receives more) attention than I ever thought it would, so I feel obliged to add a follow up to expand on the topic a little more. First, a few things that might not have been entirely clear or were missing from the…">
		<script type="text/javascript">

			window.doNotSellCallback = function() {

				var linkElements = [
					'a[href="https://wordpress.com/?ref=footer_blog"]',
					'a[href="https://wordpress.com/?ref=footer_website"]',
					'a[href="https://wordpress.com/?ref=vertical_footer"]',
					'a[href^="https://wordpress.com/?ref=footer_segment_"]',
				].join(',');

				var dnsLink = document.createElement( 'a' );
				dnsLink.href = 'https://wordpress.com/advertising-program-optout';
				dnsLink.classList.add( 'do-not-sell-link' );
				dnsLink.rel = 'nofollow';
				dnsLink.style.marginLeft = '0.5em';
				dnsLink.textContent = 'Do Not Sell My Personal Information';

				var creditLinks = document.querySelectorAll( linkElements );

				if ( 0 === creditLinks.length ) {
					return false;
				}

				Array.prototype.forEach.call( creditLinks, function( el ) {
					el.insertAdjacentElement( 'afterend', dnsLink );
				});

				return true;
			};

		</script>
				<script type="text/javascript">
		function __ATA_CC() {var v = document.cookie.match('(^|;) ?personalized-ads-consent=([^;]*)(;|$)');return v ? 1 : 0;}
		var __ATA_PP = { pt: 1, ht: 0, tn: 'independent-publisher-2', amp: false, siteid: 8982, blogid: 699263, consent: __ATA_CC() };
		var __ATA = __ATA || {};
		__ATA.cmd = __ATA.cmd || [];
		__ATA.criteo = __ATA.criteo || {};
		__ATA.criteo.cmd = __ATA.criteo.cmd || [];
		</script>
		<script type="text/javascript">
		(function(){var g=Date.now||function(){return+new Date};function h(a,b){a:{for(var c=a.length,d="string"==typeof a?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]};function k(a,b,c){c=null!=c?"="+encodeURIComponent(String(c)):"";if(b+=c){c=a.indexOf("#");0>c&&(c=a.length);var d=a.indexOf("?");if(0>d||d>c){d=c;var e=""}else e=a.substring(d+1,c);a=[a.substr(0,d),e,a.substr(c)];c=a[1];a[1]=b?c?c+"&"+b:b:c;a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a};var l=0;function m(a,b){var c=document.createElement("script");c.src=a;c.onload=function(){b&&b(void 0)};c.onerror=function(){b("error")};a=document.getElementsByTagName("head");var d;a&&0!==a.length?d=a[0]:d=document.documentElement;d.appendChild(c)}function n(a){var b=void 0===b?document.cookie:b;return(b=h(b.split("; "),function(c){return-1!=c.indexOf(a+"=")}))?b.split("=")[1]:""}function p(a){return"string"==typeof a&&0<a.length}
		function r(a,b,c){b=void 0===b?"":b;c=void 0===c?".":c;var d=[];Object.keys(a).forEach(function(e){var f=a[e],q=typeof f;"object"==q&&null!=f||"function"==q?d.push(r(f,b+e+c)):null!==f&&void 0!==f&&(e=encodeURIComponent(b+e),d.push(e+"="+encodeURIComponent(f)))});return d.filter(p).join("&")}function t(a,b){a||((window.__ATA||{}).config=b.c,m(b.url))}var u=Math.floor(1E13*Math.random()),v=window.__ATA||{};window.__ATA=v;v.rid=u;v.createdAt=g();var w=window.__ATA||{},x="s.pubmine.com";
		w&&w.serverDomain&&(x=w.serverDomain);var y="//"+x+"/conf",z=window.top===window,A=window.__ATA_PP&&window.__ATA_PP.gdpr_applies,B="boolean"===typeof A?Number(A):null,C=window.__ATA_PP||null,D=z?document.referrer?document.referrer:null:null,E=z?window.location.href:document.referrer?document.referrer:null,F,G=n("__ATA_tuuid");F=G?G:null;var H=window.innerWidth+"x"+window.innerHeight,I=n("usprivacy"),J=r({gdpr:B,pp:C,rid:u,src:D,ref:E,tuuid:F,vp:H,us_privacy:I?I:null},"",".");
		(function(a){var b=void 0===b?"cb":b;l++;var c="callback__"+g().toString(36)+"_"+l.toString(36);a=k(a,b,c);window[c]=function(d){t(void 0,d)};m(a,function(d){d&&t(d)})})(y+"?"+J);}).call(this);
		</script><script src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/conf"></script><link rel="amphtml" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/amp/"><script type="text/javascript">
	window.google_analytics_uacct = "UA-52447-2";
</script>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-52447-2']);
	_gaq.push(['_gat._anonymizeIp']);
	_gaq.push(['_setDomainName', 'wordpress.com']);
	_gaq.push(['_initData']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})();
</script><script type="text/javascript" async="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/ga.js.download"></script>
<link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/hovercard.min.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/services.min.css"><script src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/ata.js.download"></script><script charset="utf-8" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/2.js.download"></script></head>

<body class="post-template-default single single-post postid-2577 single-format-standard wp-embed-responsive customizer-styles-applied has-header-image highlander-enabled highlander-light tablet-desktop">

<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#content">Skip to content</a>

	<div id="hero-header" class="site-hero-section">
		<header id="masthead" class="site-header" role="banner">
			<div class="inner">
				<div class="site-branding">
					
												<p class="site-title"><a href="https://davmac.wordpress.com/" rel="home">Software is Crap</a></p>
													<p class="site-description">Bugs, design failures, and neglected documentation. Let's do better.</p>
									</div><!-- .site-branding -->

				
									<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false" id="primary-menu-button">
						Menu					</button><!-- .menu-toggle -->
				
			</div><!-- .inner -->
		</header><!-- #masthead -->
	</div>

				<nav id="site-navigation" class="main-navigation" role="navigation">
			<div class="menu-main-container"><ul id="primary-menu" class="menu nav-menu" aria-expanded="false"><li id="menu-item-2631" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2631"><a href="https://davmac.wordpress.com/bug-list/">Bug List</a></li>
<li id="menu-item-2632" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2632"><a href="https://davmac.wordpress.com/c99-errata/">C99/C11 errata, etc</a></li>
<li id="menu-item-2633" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2633"><a href="https://davmac.wordpress.com/about/">About</a></li>
</ul></div>		</nav><!-- .main-navigation -->
	
	
	
	<div id="content-wrapper" class="content-wrapper">
		<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			
<article id="post-2577" class="post-2577 post type-post status-publish format-standard hentry category-standards">
			<header class="entry-header">
			<h1 class="entry-title">Understanding the C/C++ memory model – part&nbsp;2</h1>		</header><!-- .entry-header -->		<div class="entry-meta">
			<span class="byline">
				<a href="https://davmac.wordpress.com/author/davmac/" title="Posts by davmac" rel="author">davmac</a>			</span>
							<span class="cat-links">
					<a href="https://davmac.wordpress.com/category/standards/" rel="category tag">Standards</a>				</span><!-- .cat-links -->
			
			
			<span class="published-on">
				<time class="entry-date published" datetime="2018-04-03T02:20:51+10:00">April 3, 2018</time><time class="updated" datetime="2018-04-04T04:43:22+10:00">April 4, 2018</time>			</span>

			<span class="word-count">6 Minutes</span>		</div><!-- .entry-meta -->
	
	<div class="entry-content">
		<p data-adtags-visited="true">My previous blog post, <a href="https://davmac.wordpress.com/2018/01/28/understanding-the-c-c-memory-model/">Understanding the C/C++ memory model</a>, got more (and still receives more) attention than I ever thought it would, so I feel obliged to add a follow up to expand on the topic a little more.</p>
<p data-adtags-visited="true">First, a few things that might not have been entirely clear or were missing from the previous post:</p>
<ol>
<li>The post was focused on acquire and release memory ordering constraints for atomic operations (and memory barriers), while the language model provides various other memory ordering constraint options. While some of these should be reasonably obvious (<em>memory_order_relaxed</em>, which essentially implies no constraints, and <em>memory_order_acq_rel</em>, which combines both acquire and release semantics in a single operation), some others&nbsp; warrant explanation.</li>
<li>In case it was not clear, the default memory ordering constraint for the atomic operations provided by the standard library is actually <em>memory_order_seq_cst</em>. Importantly, if this default is used exclusively, some of the issues applicable to the use of acquire/release orderings are no longer of concern. However, this ordering potentially imposes a performance penalty if used when it is not actually required.</li>
<li>In some cases acquire/release is not enough and we do need to make use of a stronger ordering constraint.</li>
</ol>
<p data-adtags-visited="true">However, with all that in mind, I mostly want to focus in this post on presenting a more detailed model for understanding exactly what acquire/release entail. In particular, I aim to present a comprehensible model of processor hardware – even if the model is not accurate to any particular hardware – that allows for understanding the C/C++ memory model without having to rely solely on language-defined semantics. I’m not claiming that this model is complete nor even entirely correct, but I believe it may help to understand acquire/release semantics.</p>
<h2>A hardware model to explain acquire/release</h2>
<p data-adtags-visited="true">So, bearing in mind that this is not what real processor architecture necessarily looks like, let’s suppose that each processor (or processor core) is connected directly to a pair of caches (or <em>buffers</em> if you prefer) which are then connected to the main memory of the system:</p>
<p data-adtags-visited="true"><img data-attachment-id="2578" data-permalink="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/acquire-release-svg/" data-orig-file="https://davmac.files.wordpress.com/2018/04/acquire-release-svg.png" data-orig-size="672,317" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="acquire-release.svg" data-image-description="" data-medium-file="https://davmac.files.wordpress.com/2018/04/acquire-release-svg.png?w=300" data-large-file="https://davmac.files.wordpress.com/2018/04/acquire-release-svg.png?w=672" class="alignnone size-full wp-image-2578" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/acquire-release-svg.png" alt="acquire-release.svg" srcset="https://davmac.files.wordpress.com/2018/04/acquire-release-svg.png 672w, https://davmac.files.wordpress.com/2018/04/acquire-release-svg.png?w=150 150w, https://davmac.files.wordpress.com/2018/04/acquire-release-svg.png?w=300 300w" sizes="(max-width: 672px) 100vw, 672px"></p>
<p class="inline-ad-slot" id="inline-ad-0" style="float:left;height:0px;margin:0 auto;overflow:hidden;width:740px;" data-adtags-width="740" data-adtags-visited="true"></p><p data-adtags-visited="true">Note that I’ve opted to call them “buffers” in the diagram, since I’ve learned that describing them as caches might lead to pedants claiming that the model is wrong, although it’s worth bearing in mind that (a) many people will best understand the behaviour of the buffers as being that of a cache and that (b) this model is not supposed to accurately represent any particular hardware.</p>
<p data-adtags-visited="true">I hope that the function of the <em>store buffer </em>and <em>read buffer</em> in the diagram is obvious: writes performed by the processor core go through the store buffer before reaching main memory, and reads need to go through the read buffer if the value to be read isn’t otherwise already available in either buffer. Both buffers can hold multiple values, each value corresponding to a different address. At arbitrary times and in unspecified order, values from the read buffer can be discarded, and values from the store buffer can be flushed to main memory.</p>
<p data-adtags-visited="true">Note that the buffers allow for different threads to observe reads and writes to be observed in different orders by different threads (cores), but that a thread should always see its own reads and writes in program order – in particular, if a thread writes to an address and then reads from the same address, the read operation should see the same value as was written, unless that address may have been written to by another thread in the meantime.</p>
<p data-adtags-visited="true">What may be a little confusing is that the link between the processor core and each buffer is depicted as being two-way. In fact, this is necessary for maintaining consistency between the buffers: if a single core is to store a value to a particular address, and then read that particular address, then it shouldn’t be possible that the read loads a value from main memory before the prior store has actually reached main memory. So in fact, a store operation from the processor both updates an existing value or stores a new value in the store buffer, and updates any existing value (for the corresponding address) in the read buffer.</p>
<p data-adtags-visited="true">With all this considered, how do acquire and release operations tie in? Quite simply: an acquire operation forcefully flushes the read buffer (discarding its contents), and a release operation forcefully flushes the store buffer (writing its contents to main memory). Importantly, this means that a value written must be followed by a release in the same thread, and then an acquire – in another thread – before it is read by the 2nd thread. This is what the language model itself requires.</p>
<p data-adtags-visited="true">What about atomic operations themselves? Unfortunately they are a bit hard to explain directly in terms of this simple model. We could say that atomic operations simply bypass the buffers and operate directly on main memory; the main issue with this is that it doesn’t allow for re-ordering of atomic operations on different addresses, which the language model does allow (although the orderings must still obey the associated constraints).</p>
<p class="inline-ad-slot" id="inline-ad-1" style="float:left;height:0px;margin:0 auto;overflow:hidden;width:740px;" data-adtags-width="740" data-adtags-visited="true"></p><p data-adtags-visited="true">What happens if two processor cores have a store in their store buffer to the same address? Well, that’s most likely a race condition; similarly if a store in one processor buffer matches a read from another.</p>
<h2>Sequential Consistency</h2>
<p data-adtags-visited="true">The default ordering constraint for atomic operations provided by the C/C++ standard library is <em>memory_order_seq_cst</em>, where “seq_cst” is a shortening of “sequentially consistent”. Put simply, an atomic operation with sequential consistency implies both acquire semantics (if the operation is a load) and release semantics (if the operation is a store), as well as preventing other atomic operations (of any kind) from being re-ordered with respect to the sequentially consistent operation.</p>
<p data-adtags-visited="true">Why is this ever necessary, though? Well, consider the example in the previous post of a mutual exclusion device (mutex) implemented via a spinlock, using a compare-and-exchange operation to acquire the mutex and a store to release it. Previously I suggested that acquiring the mutex could use (naturally enough) <em>acquire</em> semantics and releasing it could use, similarly, <em>release</em> semantics. In the normal case of a single mutex protecting some data structure, this is generally correct.</p>
<p data-adtags-visited="true">Sometimes, however, more complex applications can require more than a single mutex to be locked at the same time. With careless design, this can lead to deadlocks: if there are two mutexes, A and B, and one thread locks them in [A,B] order while another does so in [B,A] order, you potentially get the situation where each thread holds one mutex and requires the other (but can never obtain it). A typical approach to avoiding such problems is to impose a consistent ordering of mutex acquisition: the program could be designed, for instance, to always acquire the mutexes in the order [A,B]. Of course it is still possible to acquire either mutex alone without causing deadlock, so long as the B mutex is released before acquiring the A mutex: the important thing is that the mutexes are never acquired in the order [B,A].</p>
<p data-adtags-visited="true">In our particular example, even though atomic operations may be re-ordered, the acquisition of the B mutex will not be re-ordered with respect to the acquisition of the A mutex, since no store or load (including via an atomic operation) can move prior to an <em>acquire</em> operation. However, what can happen is that the release of one mutex can be re-ordered with respect to the acquisition of another (by moving it from before to behind), and this is problematic: Suppose that we have the sequence, in one thread:</p>
<ol>
<li>acquire B</li>
<li>release B</li>
<li>acquire A</li>
<li>release A</li>
</ol>
<p class="inline-ad-slot" id="inline-ad-2" style="float:left;height:0px;margin:0 auto;overflow:hidden;width:740px;" data-adtags-width="740" data-adtags-visited="true"></p><p data-adtags-visited="true">This <em>should</em> be ok – it doesn’t acquire the mutex A while B is held – but as has just been suggested, this sequence could be re-ordered (by the compiler or processor) as follows:</p>
<ol>
<li>acquire B</li>
<li>acquire A</li>
<li>release B</li>
<li>release A</li>
</ol>
<p data-adtags-visited="true">If another thread is obtaining both mutexes in the proscribed order, A and then B, this will lead to deadlock! The solution is to use sequentially consistent ordering, which prevents any atomic operation being re-ordered with respect to the sequentially consistent operation. Note that it’s not necessary to make every mutex operation sequentially consistent; I’ll leave it as an exercise to decide on the best solution.</p>
<p data-adtags-visited="true"><em>Edit 3 April:</em> <a href="http://preshing.com/20170612/can-reordering-of-release-acquire-operations-introduce-deadlock/">Preshing believes</a> that the problematic re-ordering detailed above isn’t allowed by the C++ language standard (he doesn’t mention C and I’ve not checked whether it has similar wording). I’m not entirely convinced myself either that the paragraph he quotes necessarily means that this is the case, nor that it is intended to do so, though I’ve not given it full consideration yet. Another example of where sequential consistency makes a difference is given in an answer to <a href="https://stackoverflow.com/questions/47393864/what-is-the-difference-between-happens-before-and-precedes-in-a-single-total">this stackoverflow question</a>.</p>
<h2>Conclusion</h2>
<p data-adtags-visited="true">The hardware model I’ve presented is hopefully simple enough to understand while providing comprehensible rationale for the particulars of the release/acquire semantics provided by the language model. It may however not be correct in every aspect and is not complete; use it only for what it is. I’ve also discussed sequential consistency and why it is sometimes necessary to avoid deadlocks.</p>
<p data-adtags-visited="true">I haven’t discussed the “consume” memory ordering, and may leave that for another time,&nbsp; but I encourage anyone who’s interested to seek out explanations elsewhere. I hope that this post and the one preceding it are enough to give a good grounding in the issues addressed by the memory model.</p>
<div id="atatags-370373-5f44e2c7e9fb3">
        <script type="text/javascript">
            __ATA.cmd.push(function() {
                __ATA.initVideoSlot('atatags-370373-5f44e2c7e9fb3', {
                    sectionId: '370373',
                    format: 'inread'
                });
            });
        </script>
    </div>			<div id="atatags-26942-5f44e2c7ea008" data-adtags-width="740"></div>
			
			<script>
				__ATA.cmd.push(function() {
					__ATA.initDynamicSlot({
						id: 'atatags-26942-5f44e2c7ea008',
						location: 120,
						formFactor: '001',
						label: {
							text: 'Advertisements',
						},
						creative: {
							reportAd: {
								text: 'Report this ad',
							},
							privacySettings: {
								text: 'Privacy settings',
							}
						}
					});
				});
			</script><div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-2577" class="share-twitter sd-button share-icon" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?share=twitter&amp;nb=1" target="_blank" title="Click to share on Twitter"><span>Twitter</span></a></li><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-2577" class="share-facebook sd-button share-icon" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?share=facebook&amp;nb=1" target="_blank" title="Click to share on Facebook"><span>Facebook</span></a></li><li class="share-end"></li></ul></div></div></div><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-loaded" id="like-post-wrapper-699263-2577-5f44e2c7ead8b" data-src="//widgets.wp.com/likes/index.html?ver=20190321#blog_id=699263&amp;post_id=2577&amp;origin=davmac.wordpress.com&amp;obj_id=699263-2577-5f44e2c7ead8b" data-name="like-post-frame-699263-2577-5f44e2c7ead8b"><h3 class="sd-title">Like this:</h3><div class="likes-widget-placeholder post-likes-widget-placeholder" style="height: 55px; display: none;"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></div><iframe class="post-likes-widget jetpack-likes-widget" name="like-post-frame-699263-2577-5f44e2c7ead8b" height="55px" width="100%" frameborder="0" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/index.html"></iframe><span class="sd-text-color"></span><a class="sd-link-color"></a></div>
<div id="jp-relatedposts" class="jp-relatedposts" data-exclude="2560" style="display: block;">
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
<div class="jp-relatedposts-items jp-relatedposts-items-minimal"><p class="jp-relatedposts-post jp-relatedposts-post0" data-post-id="2589" data-post-format="false"><span class="jp-relatedposts-post-title"><a class="jp-relatedposts-post-a" href="https://davmac.wordpress.com/2018/08/20/wrap-on-integer-overflow-is-not-a-good-idea/" title="Wrap on integer overflow is not a good idea" data-origin="2577" data-position="0">Wrap on integer overflow is not a good idea</a></span><span class="jp-relatedposts-post-context">In "Compilers"</span></p><p class="jp-relatedposts-post jp-relatedposts-post1" data-post-id="2585" data-post-format="false"><span class="jp-relatedposts-post-title"><a class="jp-relatedposts-post-a" href="https://davmac.wordpress.com/2018/06/21/escape-from-system-d-episode-v/" title="Escape from System D, episode V" data-origin="2577" data-position="1">Escape from System D, episode V</a></span><span class="jp-relatedposts-post-context">In "Dinit"</span></p><p class="jp-relatedposts-post jp-relatedposts-post2" data-post-id="2026" data-post-format="false"><span class="jp-relatedposts-post-title"><a class="jp-relatedposts-post-a" href="https://davmac.wordpress.com/2017/06/14/escape-from-system-d/" title="Escape from System D" data-origin="2577" data-position="2">Escape from System D</a></span><span class="jp-relatedposts-post-context">In "Dinit"</span></p></div></div></div>	</div><!-- .entry-content -->

	<div class="entry-footer">
			</div><!-- .entry-footer -->

	<div class="entry-author-wrapper">
			<div class="entry-author author-avatar-show">
				<div class="author-avatar">
			<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/61df8d728c699c39c4c73507da598712.jpeg" class="avatar avatar-80 grav-hashed grav-hijack" height="80" width="80" id="grav-61df8d728c699c39c4c73507da598712-0">		</div><!-- .author-avatar -->
		
		<div class="author-heading">
			<h2 class="author-title">Published by <span class="author-name">davmac</span></h2>
		</div><!-- .author-heading -->

		<p class="author-bio">
						<a class="author-link" href="https://davmac.wordpress.com/author/davmac/" rel="author">
				View all posts by davmac			</a>
		</p><!-- .author-bio -->
	</div><!-- .entry-auhtor -->
		<div class="site-posted-on">
			<strong>Published</strong>
			<time class="entry-date published" datetime="2018-04-03T02:20:51+10:00">April 3, 2018</time><time class="updated" datetime="2018-04-04T04:43:22+10:00">April 4, 2018</time>		</div><!-- .site-posted-on -->
	</div>
</article><!-- #post-## -->

			
	<nav class="navigation post-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://davmac.wordpress.com/2018/01/28/understanding-the-c-c-memory-model/" rel="prev"><span class="meta-nav screen-reader-text">Previous Post</span> Understanding the C/C++ memory&nbsp;model</a></div><div class="nav-next"><a href="https://davmac.wordpress.com/2018/06/21/escape-from-system-d-episode-v/" rel="next"><span class="meta-nav screen-reader-text">Next Post</span> Escape from System D, episode&nbsp;V</a></div></div>
	</nav>
			
<div id="comments" class="comments-area">

	
			<h2 class="comments-title">
			13 thoughts on “<span>Understanding the C/C++ memory model – part&nbsp;2</span>”		</h2><!-- .comments-title -->

		
		<ol class="comment-list">
					<li id="comment-1340" class="comment even thread-even depth-1 parent highlander-comment" data-adtags-visited="true">
			<article id="div-comment-1340" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/photo.jpg" class="avatar avatar-48" height="48" width="48">						<b class="fn"><a href="https://plus.google.com/102875977343422379382" rel="external nofollow ugc" class="url">WallSt Prog</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1340">
							<time datetime="2018-04-11T04:12:53+10:00">
								April 11, 2018 at 4:12 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I’m curious about the use of the word “thread”, for instance in this passage:</p>
<p>“Note that the buffers allow for different threads to observe reads and writes to be observed in different orders by different threads (cores), but that a thread should always see its own reads and writes in program order – in particular, if a thread writes to an address and then reads from the same address, the read operation should see the same value as was written, unless that address may have been written to by another thread in the meantime.”</p>
<p>By “thread” do you really mean “core”?  Or, if you really do mean “thread” is there some mechanism that ensures that as threads get moved between cores their non-observed state gets moved also?</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1340#respond" data-commentid="1340" data-postid="2577" data-belowelement="div-comment-1340" data-respondelement="respond" data-replyto="Reply to WallSt Prog" aria-label="Reply to WallSt Prog">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1341" class="comment odd alt depth-2 parent highlander-comment">
			<article id="div-comment-1341" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/photo.jpg" class="avatar avatar-48" height="48" width="48">						<b class="fn"><a href="https://plus.google.com/102875977343422379382" rel="external nofollow ugc" class="url">WallSt Prog</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1341">
							<time datetime="2018-04-11T04:15:52+10:00">
								April 11, 2018 at 4:15 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Never mind — I see that you are apparently using “thread” and “core” interchangeably.  That’s a bit confusing if you ask me.</p>
<p>That aside, thanks for a nice write-up — it’s been quite helpful in understanding some of the (very) un-intuitive behavior exhibited by modern CPUs.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1341#respond" data-commentid="1341" data-postid="2577" data-belowelement="div-comment-1341" data-respondelement="respond" data-replyto="Reply to WallSt Prog" aria-label="Reply to WallSt Prog">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1342" class="comment byuser comment-author-davmac bypostauthor even depth-3 highlander-comment">
			<article id="div-comment-1342" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/61df8d728c699c39c4c73507da598712(1).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-61df8d728c699c39c4c73507da598712-1">						<b class="fn"><a href="http://davmac.org/" rel="external nofollow ugc" class="url">davmac</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1342">
							<time datetime="2018-04-11T19:24:09+10:00">
								April 11, 2018 at 7:24 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>You’re right that I could/should have put the relationship between cores and threads more explicitly, though for purposes of understanding the language memory model you can assume that each thread runs on its own core. In the hardware model I’ve presented, if you wanted to allow for migration of threads between (a potentially limited number of) cores, then a context switch – that is, a switch to running a different thread on some core – requires that the read and store buffer be flushed (which would need to be arranged by the system).</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1342#respond" data-commentid="1342" data-postid="2577" data-belowelement="div-comment-1342" data-respondelement="respond" data-replyto="Reply to davmac" aria-label="Reply to davmac">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<p class="inline-ad-slot" id="inline-ad-3" style="float:left;height:0px;margin:0 auto;overflow:hidden;width:740px;" data-adtags-width="740" data-adtags-visited="true"></p><li id="comment-1359" class="comment odd alt thread-odd thread-alt depth-1 parent highlander-comment" data-adtags-visited="true">
			<article id="div-comment-1359" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/5379a594d6a4b0e236bee44e77d29c95" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-5379a594d6a4b0e236bee44e77d29c95-0">						<b class="fn">John Payson</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1359">
							<time datetime="2018-06-12T06:26:44+10:00">
								June 12, 2018 at 6:26 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>To my mind, it feels more natural to think in terms of a cache for which the state of every address is “absent”, “clean”, “dirty”, or “poisoned”.  An acquire set all clean or poisoned entries to absent, and a release would convert all dirty entries to clean ones (by writing them to memory).  Such a model could handle a couple of situations which yours presently does not</p>
<p>(1) Given the sequence “read X (yielding value #1); write value #2 to X; release; read X”, the read buffer would receive the value #1 from the first read, and nothing that happens later would change that.  The act of writing value #2 needs to remove value #1 from the read buffer.  With a single cache, that would happen implicitly; if using two caches, you would need to specify the means by which it occurs.</p>
<p>(2) Given core #1 write; core #2 acquire; core #1 release; core #2 read” (using other intervening operations, not involving the address in question, to ensure that core #1 release occurs before core #2 read) your model would suggest that core #2’s acquire would flush the read buffer, and it would thus be empty when it performs the read.  I’m pretty sure, though, core #2 would be allowed to load data from memory into the read buffer at any arbitrary time between the acquire and the read request, though.  Saying that spontaneous loads cannot occur with dirty addresses seems cleaner than saying that data can only appear spontaneously in the read buffer when no corresponding data is in the write buffer.</p>
<p>Perhaps the model with separate read/write buffers can be adjusted to handle all corner cases, but I think the description above misses important cases which would be awkward to describe under that model.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1359#respond" data-commentid="1359" data-postid="2577" data-belowelement="div-comment-1359" data-respondelement="respond" data-replyto="Reply to John Payson" aria-label="Reply to John Payson">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1360" class="comment byuser comment-author-davmac bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-1360" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/61df8d728c699c39c4c73507da598712(1).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-61df8d728c699c39c4c73507da598712-2">						<b class="fn"><a href="http://davmac.org/" rel="external nofollow ugc" class="url">davmac</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1360">
							<time datetime="2018-06-12T18:39:24+10:00">
								June 12, 2018 at 6:39 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>for (1) I think this is handled by:</p>
<p><i>So in fact, a store operation from the processor both updates an existing value or stores a new value in the store buffer, and updates any existing value (for the corresponding address) in the read buffer</i></p>
<p>for (2) I think we could just say that loads into the read buffer can occur at any time without an explicit read operation. (Note that It wasn’t actually explicitly specified otherwise).</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1360#respond" data-commentid="1360" data-postid="2577" data-belowelement="div-comment-1360" data-respondelement="respond" data-replyto="Reply to davmac" aria-label="Reply to davmac">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1364" class="comment odd alt depth-3 parent highlander-comment">
			<article id="div-comment-1364" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/5379a594d6a4b0e236bee44e77d29c95" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-5379a594d6a4b0e236bee44e77d29c95-1">						<b class="fn">John Payson</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1364">
							<time datetime="2018-06-23T05:44:39+10:00">
								June 23, 2018 at 5:44 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Handling either situation individually wouldn’t be too bad even with the two-buffer model, but handling them both in a two-buffer model gets tricky.  If acquire operations flush the read buffer, then it will be necessary to either have spontaneous reloads loads of read-buffer contents check for pending data in the write buffer, or have actions that remove committed data from the write buffer clean up any superseded data that might be sitting in the read buffer.  While doing such things wouldn’t be impossible, all of them would effectively require an arrow that connects the read and write buffers, and so far as I can tell would be semantically equivalent to simply having one buffer where each row can be absent, clean, or dirty.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1364#respond" data-commentid="1364" data-postid="2577" data-belowelement="div-comment-1364" data-respondelement="respond" data-replyto="Reply to John Payson" aria-label="Reply to John Payson">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1366" class="comment byuser comment-author-davmac bypostauthor even depth-4 highlander-comment">
			<article id="div-comment-1366" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/61df8d728c699c39c4c73507da598712(1).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-61df8d728c699c39c4c73507da598712-3">						<b class="fn"><a href="http://davmac.org/" rel="external nofollow ugc" class="url">davmac</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1366">
							<time datetime="2018-06-23T21:52:42+10:00">
								June 23, 2018 at 9:52 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I think you are overthinking the issue in an attempt to get a complete model. This model wasn’t intended to complete – it’s intended to be simple to understand and give an understanding of when, in common cases, it is necessary to do an acquire or release. It doesn’t capture all race conditions, though (and nor, as far as I can see, does your own proposed model).</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1366#respond" data-commentid="1366" data-postid="2577" data-belowelement="div-comment-1366" data-respondelement="respond" data-replyto="Reply to davmac" aria-label="Reply to davmac">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<p class="inline-ad-slot" id="inline-ad-4" style="float:left;height:0px;margin:0 auto;overflow:hidden;width:740px;" data-adtags-width="740" data-adtags-visited="true"></p><li id="comment-1529" class="comment odd alt thread-even depth-1 parent highlander-comment" data-adtags-visited="true">
			<article id="div-comment-1529" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/4012cb8a467eccb07fc5e1df1160d062" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-4012cb8a467eccb07fc5e1df1160d062-0">						<b class="fn">David Klempner</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1529">
							<time datetime="2018-12-28T12:30:01+10:00">
								December 28, 2018 at 12:30 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>It is definitely the case that the dual mutex reordering shouldn’t happen, and it would almost certainly be treated as a bug in the standard if it can.</p>
<p>This area is full of tricky corner cases, many of which the authors of the standard didn’t foresee. In that light, statements of intent are more powerful than the actual text of the standard — they indicate where issues like this would be considered bugs.</p>
<p>Pershing mentioned in the link that the C++17 language added such an unambiguous statement of intent that at the very least complier optimizations not lead to this scenario.</p>
<p>There is, however, a far more basic such statement that covers this scenario: the names “acquire” and “release” come from the ordering semantics needed to implement “acquire” and “release” for a mutex, and so the use of these words by the C and C++ languages indicates that they should be sufficient for acquire and release of (simple) mutexes, which they would not be if your scenario were allowed.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1529#respond" data-commentid="1529" data-postid="2577" data-belowelement="div-comment-1529" data-respondelement="respond" data-replyto="Reply to David Klempner" aria-label="Reply to David Klempner">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1530" class="comment byuser comment-author-davmac bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-1530" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/61df8d728c699c39c4c73507da598712(1).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-61df8d728c699c39c4c73507da598712-4">						<b class="fn"><a href="http://davmac.org/" rel="external nofollow ugc" class="url">davmac</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1530">
							<time datetime="2018-12-28T19:27:28+10:00">
								December 28, 2018 at 7:27 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<blockquote><p>
  <i>It is definitely the case that the dual mutex reordering shouldn’t happen</i>
</p></blockquote>
<p>“Definitely” is a strong word and you’re using it here without sufficiently strong justification, in my opinion.</p>
<p>I guess that by “statement of intent” you are referring to 4.7.2:18:</p>
<blockquote><p>An implementation should ensure that the last value (in modification order) assigned by an atomic or synchronization operation will become visible to all other threads in a finite period of time.</p></blockquote>
<p>I don’t think that’s meant to be a statement of intent, rather, it’s a hard requirement. Interpreted literally (as it arguably should be) Preshing rightly points out that it precludes re-ordering of acquire/release operations where it would potentially prevent another thread from seeing an update indefinitely. However, I’m not sure that this was really the intent of that paragraph and Preshing also retains doubts. I suspect instead that it is meant to cover the simple case of a value being stored atomically in one thread while another thread continuously loads it (with appropriate ordering constraints in both cases) – the implementation must ensure that the reading thread does see the value written by the other, at some point.</p>
<blockquote><p>
  <i>There is, however, a far more basic such statement that covers this scenario: the names “acquire” and “release” come from the ordering semantics needed to implement “acquire” and “release” for a mutex, and so the use of these words by the C and C++ languages indicates that they should be sufficient for acquire and release of (simple) mutexes, which they would not be if your scenario were allowed.</i>
</p></blockquote>
<p>This is not the sort of logic you can apply when reading a formal language specification. Terms are only meaningful in so far as they are defined in the document itself. In any case, the ordering as specified <i>is</i> certainly sufficient for acquire and release of <i>individual</i> mutexes and that’s enough to explain the use of these terms.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1530#respond" data-commentid="1530" data-postid="2577" data-belowelement="div-comment-1530" data-respondelement="respond" data-replyto="Reply to davmac" aria-label="Reply to davmac">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1553" class="comment odd alt depth-3 parent highlander-comment">
			<article id="div-comment-1553" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/4012cb8a467eccb07fc5e1df1160d062" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-4012cb8a467eccb07fc5e1df1160d062-1">						<b class="fn">David Klempner</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1553">
							<time datetime="2019-01-11T18:14:39+10:00">
								January 11, 2019 at 6:14 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<blockquote><p>I don’t think that’s meant to be a statement of intent, rather, it’s a hard requirement.</p></blockquote>
<p>If it were a hard requirement, the standard would have used the word “must” rather than “should”.</p>
<blockquote><p>This is not the sort of logic you can apply when reading a formal language specification.</p></blockquote>
<p>Formal language specifications, like programs, have bugs. That’s a fact of life. When you’re trying to figure out what a buggy program is supposed to be doing, you have to take into account context; you’re not going to figure it out by mechanically parsing what the buggy code does.</p>
<p>Use of commonly understood terminology like “acquire” and “release” has the same sort of power as a code comment — it doesn’t tell you anything directly about what the standard formally says right now, but it says a lot as to what future versions of the formal standard will say, and what implementers of said standard will do.</p>
<p>Further, practically speaking there are enough existing users that assume acquire/release RMWs are sufficient — certainly, for example, abseil’s mutex and spinlock implementations do. A compiler that made acquire/release insufficient for mutexes would break a lot of code out there.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1553#respond" data-commentid="1553" data-postid="2577" data-belowelement="div-comment-1553" data-respondelement="respond" data-replyto="Reply to David Klempner" aria-label="Reply to David Klempner">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1567" class="comment byuser comment-author-davmac bypostauthor even depth-4 parent highlander-comment">
			<article id="div-comment-1567" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/61df8d728c699c39c4c73507da598712(1).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-61df8d728c699c39c4c73507da598712-5">						<b class="fn"><a href="http://davmac.org/" rel="external nofollow ugc" class="url">davmac</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1567">
							<time datetime="2019-01-17T10:35:50+10:00">
								January 17, 2019 at 10:35 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<blockquote><p>If it were a hard requirement, the standard would have used the word “must” rather than “should”.</p></blockquote>
<p>Fair point. A soft requirement, not a hard requirement. I still wouldn’t personally call it a “statement of intent”, but that’s just a matter of word choice, I suppose.</p>
<blockquote><p>Use of commonly understood terminology like “acquire” and “release” has the same sort of power as a code comment</p></blockquote>
<p>Sure, but I already pointed out that the described acquire/release semantics <i>are</i> sufficient for lone mutexes. That’s enough to explain the use of these names. I don’t know the “abseil” you speak of, but it seems to me that its equally possibly its mutex/spinlock implementations are buggy. At least, either the wording of the standard is wrong (or incomplete) or the code in that implementation is wrong. It could be either. (In practice, of course, the code might well behave as intended on all current compilers). But the existence of some code (even a lot of code) which relies on a particular interpretation of the language standard by itself doesn’t mean that this interpretation is correct. For example, there are/were plenty of C programs, that are considered definitely wrong by compiler vendors, but which worked properly for years (until compilers started performing more aggressive optimisations).</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1567#respond" data-commentid="1567" data-postid="2577" data-belowelement="div-comment-1567" data-respondelement="respond" data-replyto="Reply to davmac" aria-label="Reply to davmac">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1755" class="comment odd alt depth-5 highlander-comment">
			<article id="div-comment-1755" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/5379a594d6a4b0e236bee44e77d29c95" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-5379a594d6a4b0e236bee44e77d29c95-2">						<b class="fn"><a href="https://plus.google.com/109675900393987425730" rel="external nofollow ugc" class="url">John Payson</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1755">
							<time datetime="2019-01-26T11:40:21+10:00">
								January 26, 2019 at 11:40 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Most C implementations are designed to produce an executable which will be run in an environment outside the implementation’s control.  If an environment offers a means of attempting an operation on a “best effort” basis that will usually succeed, but it can’t guarantee success, allowing an implementation to support the standard means of using that feature even though it’s not perfect may be be more useful than requiring that the implementation report that it doesn’t support the feature.</p>
<p>In fact, one of my biggest complaints with the C and C++ Standards is the excessively strong desire to classify things into those that implementations must do and those that they should not be particularly expected to do, without recognizing the large number of actions which implementations should be expected to do <em>absent a documented reason for being unable to do so</em>.  The Standard shouldn’t need to concern itself with whether a reason is “good enough”; the marketplace should be able to do that if implementations are required to admit their weaknesses.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1755#respond" data-commentid="1755" data-postid="2577" data-belowelement="div-comment-1755" data-respondelement="respond" data-replyto="Reply to John Payson" aria-label="Reply to John Payson">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1568" class="comment byuser comment-author-davmac bypostauthor even depth-4 highlander-comment">
			<article id="div-comment-1568" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/61df8d728c699c39c4c73507da598712(1).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-61df8d728c699c39c4c73507da598712-6">						<b class="fn"><a href="http://davmac.org/" rel="external nofollow ugc" class="url">davmac</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-1568">
							<time datetime="2019-01-17T10:54:31+10:00">
								January 17, 2019 at 10:54 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>In addition, something I just noticed, going back to your first comment:</p>
<blockquote><p>It is definitely the case that the dual mutex reordering shouldn’t happen, and it would almost certainly be treated as a bug in the standard if it can.</p></blockquote>
<p>I should clarify that the post is not saying that mutex lock/unlock re-ordering is allowed by the standard; it’s saying that a particular mutex implementation may be problematic in that it would allow such re-ordering.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?replytocom=1568#respond" data-commentid="1568" data-postid="2577" data-belowelement="div-comment-1568" data-respondelement="respond" data-replyto="Reply to davmac" aria-label="Reply to davmac">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
	
		<div id="respond" class="comment-respond js">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/?relatedposts_hit=1&amp;relatedposts_origin=2560&amp;relatedposts_position=0#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://davmac.wordpress.com/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate=""><input type="hidden" id="highlander_comment_nonce" name="highlander_comment_nonce" value="8a32524790"><input type="hidden" name="_wp_http_referer" value="/2018/04/03/understanding-the-c-c-memory-model-part-2/?relatedposts_hit=1&amp;relatedposts_origin=2560&amp;relatedposts_position=0">
<input type="hidden" name="hc_post_as" id="hc_post_as" value="guest">

<div class="comment-form-field comment-textarea">
	
	<div id="comment-form-comment"><textarea aria-hidden="true" tabindex="-1" style="position: absolute; top: -999px; left: 0px; right: auto; bottom: auto; border: 0px; padding: 0px; box-sizing: content-box; overflow-wrap: break-word; overflow: hidden; transition: none 0s ease 0s; height: 0px !important; min-height: 0px !important; font-family: Arial, Helvetica, Tahoma, Verdana, sans-serif; font-size: 14px; font-weight: 400; font-style: normal; letter-spacing: 0px; text-transform: none; text-decoration: none solid rgba(0, 0, 0, 0.7); word-spacing: 0px; text-indent: 0px; line-height: 18px; width: 718px;" class="autosizejs "></textarea><textarea id="comment" name="comment" title="Enter your comment here..." placeholder="Enter your comment here..." style="height: 38px; overflow: hidden; overflow-wrap: break-word; resize: none;"></textarea></div>
</div>

<div id="comment-form-identity" style="display: none;">
	<div id="comment-form-nascar">
		<p>Fill in your details below or click an icon to log in:</p>
		<ul>
			<li class="selected" style="display:none;">
				<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-form-guest" id="postas-guest" class="nascar-signin-link" title="Login via Guest">
									</a>
			</li>
			<li>
				<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-form-load-service:WordPress.com" id="postas-wordpress" class="nascar-signin-link" title="Login via WordPress.com">
					<svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#0087be" d="M12.158 12.786l-2.698 7.84c.806.236 1.657.365 2.54.365 1.047 0 2.05-.18 2.986-.51-.024-.037-.046-.078-.065-.123l-2.762-7.57zM3.008 12c0 3.56 2.07 6.634 5.068 8.092L3.788 8.342c-.5 1.117-.78 2.354-.78 3.658zm15.06-.454c0-1.112-.398-1.88-.74-2.48-.456-.74-.883-1.368-.883-2.11 0-.825.627-1.595 1.51-1.595.04 0 .078.006.116.008-1.598-1.464-3.73-2.36-6.07-2.36-3.14 0-5.904 1.613-7.512 4.053.21.008.41.012.58.012.94 0 2.395-.114 2.395-.114.484-.028.54.684.057.74 0 0-.487.058-1.03.086l3.275 9.74 1.968-5.902-1.4-3.838c-.485-.028-.944-.085-.944-.085-.486-.03-.43-.77.056-.742 0 0 1.484.114 2.368.114.94 0 2.397-.114 2.397-.114.486-.028.543.684.058.74 0 0-.488.058-1.03.086l3.25 9.665.897-2.997c.456-1.17.684-2.137.684-2.907zm1.82-3.86c.04.286.06.593.06.924 0 .912-.17 1.938-.683 3.22l-2.746 7.94c2.672-1.558 4.47-4.454 4.47-7.77 0-1.564-.4-3.033-1.1-4.314zM12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10z"></path></g></svg>				</a>
			</li>
			<li>
			<iframe id="googleplus-sign-in" name="googleplus-sign-in" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/saved_resource(7).html" width="24" height="24" scrolling="no" allowtransparency="true" seamless="seamless" frameborder="0"></iframe>
			</li>
			<li>
				<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-form-load-service:Twitter" id="postas-twitter" class="nascar-signin-link" title="Login via Twitter">
					<svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#1DA1F2" d="M22.23 5.924c-.736.326-1.527.547-2.357.646.847-.508 1.498-1.312 1.804-2.27-.793.47-1.67.812-2.606.996C18.325 4.498 17.258 4 16.078 4c-2.266 0-4.103 1.837-4.103 4.103 0 .322.036.635.106.935-3.41-.17-6.433-1.804-8.457-4.287-.353.607-.556 1.312-.556 2.064 0 1.424.724 2.68 1.825 3.415-.673-.022-1.305-.207-1.86-.514v.052c0 1.988 1.415 3.647 3.293 4.023-.344.095-.707.145-1.08.145-.265 0-.522-.026-.773-.074.522 1.63 2.038 2.817 3.833 2.85-1.404 1.1-3.174 1.757-5.096 1.757-.332 0-.66-.02-.98-.057 1.816 1.164 3.973 1.843 6.29 1.843 7.547 0 11.675-6.252 11.675-11.675 0-.178-.004-.355-.012-.53.802-.578 1.497-1.3 2.047-2.124z"></path></g></svg>				</a>
			</li>
			<li>
				<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#comment-form-load-service:Facebook" id="postas-facebook" class="nascar-signin-link" title="Login via Facebook">
					<svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#3B5998" d="M20.007 3H3.993C3.445 3 3 3.445 3 3.993v16.013c0 .55.445.994.993.994h8.62v-6.97H10.27V11.31h2.346V9.31c0-2.325 1.42-3.59 3.494-3.59.993 0 1.847.073 2.096.106v2.43h-1.438c-1.128 0-1.346.537-1.346 1.324v1.734h2.69l-.35 2.717h-2.34V21h4.587c.548 0 .993-.445.993-.993V3.993c0-.548-.445-.993-.993-.993z"></path></g></svg>				</a>
			</li>
		</ul>
	</div>

	<div id="comment-form-guest" class="comment-form-service selected">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
<a href="https://gravatar.com/site/signup/" target="_blank">				<img src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/ad516503a11cd5ca435acc9bb6523536" alt="Gravatar" width="25" class="no-grav grav-hashed grav-hijack" id="grav-ad516503a11cd5ca435acc9bb6523536-0">
</a>			</div>

				<div class="comment-form-fields">
				<div class="comment-form-field comment-form-email">
					<label for="email">Email <span class="required">(required)</span> <span class="nopublish">(Address never made public)</span></label>
					<div class="comment-form-input"><input id="email" name="email" type="email" value=""></div>
				</div>
				<div class="comment-form-field comment-form-author">
					<label for="author">Name <span class="required">(required)</span></label>
					<div class="comment-form-input"><input id="author" name="author" type="text" value=""></div>
				</div>
				<div class="comment-form-field comment-form-url">
					<label for="url">Website</label>
					<div class="comment-form-input"><input id="url" name="url" type="url" value=""></div>
				</div>
			</div>
			
		</div>
	</div>

	<div id="comment-form-wordpress" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/ad516503a11cd5ca435acc9bb6523536" alt="WordPress.com Logo" width="25" class="no-grav grav-hashed grav-hijack" id="grav-ad516503a11cd5ca435acc9bb6523536-1">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="wp_avatar" id="wordpress-avatar" class="comment-meta-wordpress" value="">
				<input type="hidden" name="wp_user_id" id="wordpress-user_id" class="comment-meta-wordpress" value="">
				<input type="hidden" name="wp_access_token" id="wordpress-access_token" class="comment-meta-wordpress" value="">
						<p class="comment-form-posting-as pa-wordpress">
			<strong></strong>
			You are commenting using your WordPress.com account.			<span class="comment-form-log-out">
				(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( &#39;wordpress&#39; );">Log&nbsp;Out</a>&nbsp;/&nbsp;
				<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)
			</span>
			<span class="pa-icon"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#0087be" d="M12.158 12.786l-2.698 7.84c.806.236 1.657.365 2.54.365 1.047 0 2.05-.18 2.986-.51-.024-.037-.046-.078-.065-.123l-2.762-7.57zM3.008 12c0 3.56 2.07 6.634 5.068 8.092L3.788 8.342c-.5 1.117-.78 2.354-.78 3.658zm15.06-.454c0-1.112-.398-1.88-.74-2.48-.456-.74-.883-1.368-.883-2.11 0-.825.627-1.595 1.51-1.595.04 0 .078.006.116.008-1.598-1.464-3.73-2.36-6.07-2.36-3.14 0-5.904 1.613-7.512 4.053.21.008.41.012.58.012.94 0 2.395-.114 2.395-.114.484-.028.54.684.057.74 0 0-.487.058-1.03.086l3.275 9.74 1.968-5.902-1.4-3.838c-.485-.028-.944-.085-.944-.085-.486-.03-.43-.77.056-.742 0 0 1.484.114 2.368.114.94 0 2.397-.114 2.397-.114.486-.028.543.684.058.74 0 0-.488.058-1.03.086l3.25 9.665.897-2.997c.456-1.17.684-2.137.684-2.907zm1.82-3.86c.04.286.06.593.06.924 0 .912-.17 1.938-.683 3.22l-2.746 7.94c2.672-1.558 4.47-4.454 4.47-7.77 0-1.564-.4-3.033-1.1-4.314zM12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10z"></path></g></svg></span>
		</p>
					</div>
	
		</div>
	</div>

	<div id="comment-form-googleplus" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/ad516503a11cd5ca435acc9bb6523536" alt="Google photo" width="25" class="no-grav grav-hashed grav-hijack" id="grav-ad516503a11cd5ca435acc9bb6523536-2">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="googleplus_avatar" id="googleplus-avatar" class="comment-meta-googleplus" value="">
				<input type="hidden" name="googleplus_user_id" id="googleplus-user_id" class="comment-meta-googleplus" value="">
				<input type="hidden" name="googleplus_access_token" id="googleplus-access_token" class="comment-meta-googleplus" value="">
						<p class="comment-form-posting-as pa-googleplus">
			<strong></strong>
			You are commenting using your Google account.			<span class="comment-form-log-out">
				(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( &#39;googleplus&#39; );">Log&nbsp;Out</a>&nbsp;/&nbsp;
				<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)
			</span>
			<span class="pa-icon"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" x="0px" y="0px" viewBox="0 0 60 60"><path fill="#519bf7" d="M56.3,30c0,-1.6 -0.2,-3.4 -0.6,-5h-3.1H42.2H30v10.6h14.8C44,39.3 42,42 39.1,43.9l8.8,6.8C53,46 56.3,39 56.3,30z"></path><path fill="#3db366" d="M30,57.5c6.7,0 13.1,-2.4 17.9,-6.8l-8.8,-6.8c-2.5,1.6 -5.6,2.4 -9.1,2.4c-7.2,0 -13.3,-4.7 -15.4,-11.2l-9.3,7.1C9.8,51.3 19.1,57.5 30,57.5z"></path><path fill="#fdc600" d="M5.3,42.2l9.3,-7.1c-0.5,-1.6 -0.8,-3.3 -0.8,-5.1s0.3,-3.5 0.8,-5.1l-9.3,-7.1C3.5,21.5 2.5,25.6 2.5,30S3.5,38.5 5.3,42.2z"></path><path fill="#f15b44" d="M40.1,17.4l8,-8C43.3,5.1 37,2.5 30,2.5C19.1,2.5 9.8,8.7 5.3,17.8l9.3,7.1c2.1,-6.5 8.2,-11.1 15.4,-11.1C33.9,13.7 37.4,15.1 40.1,17.4z"></path></svg></span>
		</p>
					</div>
	
		</div>
	</div>

	<div id="comment-form-twitter" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/ad516503a11cd5ca435acc9bb6523536" alt="Twitter picture" width="25" class="no-grav grav-hashed grav-hijack" id="grav-ad516503a11cd5ca435acc9bb6523536-3">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="twitter_avatar" id="twitter-avatar" class="comment-meta-twitter" value="">
				<input type="hidden" name="twitter_user_id" id="twitter-user_id" class="comment-meta-twitter" value="">
				<input type="hidden" name="twitter_access_token" id="twitter-access_token" class="comment-meta-twitter" value="">
						<p class="comment-form-posting-as pa-twitter">
			<strong></strong>
			You are commenting using your Twitter account.			<span class="comment-form-log-out">
				(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( &#39;twitter&#39; );">Log&nbsp;Out</a>&nbsp;/&nbsp;
				<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)
			</span>
			<span class="pa-icon"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#1DA1F2" d="M22.23 5.924c-.736.326-1.527.547-2.357.646.847-.508 1.498-1.312 1.804-2.27-.793.47-1.67.812-2.606.996C18.325 4.498 17.258 4 16.078 4c-2.266 0-4.103 1.837-4.103 4.103 0 .322.036.635.106.935-3.41-.17-6.433-1.804-8.457-4.287-.353.607-.556 1.312-.556 2.064 0 1.424.724 2.68 1.825 3.415-.673-.022-1.305-.207-1.86-.514v.052c0 1.988 1.415 3.647 3.293 4.023-.344.095-.707.145-1.08.145-.265 0-.522-.026-.773-.074.522 1.63 2.038 2.817 3.833 2.85-1.404 1.1-3.174 1.757-5.096 1.757-.332 0-.66-.02-.98-.057 1.816 1.164 3.973 1.843 6.29 1.843 7.547 0 11.675-6.252 11.675-11.675 0-.178-.004-.355-.012-.53.802-.578 1.497-1.3 2.047-2.124z"></path></g></svg></span>
		</p>
					</div>
	
		</div>
	</div>

	<div id="comment-form-facebook" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/ad516503a11cd5ca435acc9bb6523536" alt="Facebook photo" width="25" class="no-grav grav-hashed grav-hijack" id="grav-ad516503a11cd5ca435acc9bb6523536-4">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="fb_avatar" id="facebook-avatar" class="comment-meta-facebook" value="">
				<input type="hidden" name="fb_user_id" id="facebook-user_id" class="comment-meta-facebook" value="">
				<input type="hidden" name="fb_access_token" id="facebook-access_token" class="comment-meta-facebook" value="">
						<p class="comment-form-posting-as pa-facebook">
			<strong></strong>
			You are commenting using your Facebook account.			<span class="comment-form-log-out">
				(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( &#39;facebook&#39; );">Log&nbsp;Out</a>&nbsp;/&nbsp;
				<a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)
			</span>
			<span class="pa-icon"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#3B5998" d="M20.007 3H3.993C3.445 3 3 3.445 3 3.993v16.013c0 .55.445.994.993.994h8.62v-6.97H10.27V11.31h2.346V9.31c0-2.325 1.42-3.59 3.494-3.59.993 0 1.847.073 2.096.106v2.43h-1.438c-1.128 0-1.346.537-1.346 1.324v1.734h2.69l-.35 2.717h-2.34V21h4.587c.548 0 .993-.445.993-.993V3.993c0-.548-.445-.993-.993-.993z"></path></g></svg></span>
		</p>
					</div>
	
		</div>
	</div>


	<div id="comment-form-load-service" class="comment-form-service">
		<div class="comment-form-posting-as-cancel"><a href="javascript:HighlanderComments.cancelExternalWindow();">Cancel</a></div>
		<p>Connecting to %s</p>
	</div>

</div>

<script type="text/javascript">
var highlander_expando_javascript = function(){
	var input = document.createElement( 'input' ),
	    comment = jQuery( '#comment' );

	if ( 'placeholder' in input ) {
		comment.attr( 'placeholder', jQuery( '.comment-textarea label' ).remove().text() );
	}

	// Expando Mode: start small, then auto-resize on first click + text length
	jQuery( '#comment-form-identity' ).hide();
	jQuery( '#comment-form-subscribe' ).hide();
	jQuery( '#commentform .form-submit' ).hide();

	comment.css( { 'height':'10px' } ).one( 'focus', function() {
		var timer = setInterval( HighlanderComments.resizeCallback, 10 )
		jQuery( this ).animate( { 'height': HighlanderComments.initialHeight } ).delay( 100 ).queue( function(n) { clearInterval( timer ); HighlanderComments.resizeCallback(); n(); } );
		jQuery( '#comment-form-identity' ).slideDown();
		jQuery( '#comment-form-subscribe' ).slideDown();
		jQuery( '#commentform .form-submit' ).slideDown();
	});
}
jQuery(document).ready( highlander_expando_javascript );
</script>

<div id="comment-form-subscribe" style="display: none;">
	<p class="comment-subscription-form"><input type="checkbox" name="subscribe" id="subscribe" value="subscribe" style="width: auto;"> <label class="subscribe-label" id="subscribe-label" for="subscribe" style="display: inline;">Notify me of new comments via email.</label></p><p class="post-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto;"> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog" style="display: inline;">Notify me of new posts via email.</label></p></div>




<p class="form-submit" style="display: none;"><input name="submit" type="submit" id="comment-submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="2577" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="26b09aef77"></p>
<input type="hidden" name="genseq" value="1598350024">
<p style="display: none;"></p><input type="hidden" id="ak_js" name="ak_js" value="1598350028600"></form>	</div><!-- #respond -->
	<div style="clear: both"></div><p class="akismet_comment_form_privacy_notice">This site uses Akismet to reduce spam. <a href="https://akismet.com/privacy/" target="_blank" rel="nofollow noopener">Learn how your comment data is processed</a>.</p>
</div><!-- #comments -->

		
		</main><!-- #main -->
	</div><!-- #primary -->

		</div><!-- #content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
						<div class="site-info">
				<a href="https://wordpress.com/?ref=footer_blog" rel="nofollow">Blog at WordPress.com.</a><a href="https://wordpress.com/advertising-program-optout" class="do-not-sell-link" rel="nofollow" style="margin-left: 0.5em;">Do Not Sell My Personal Information</a>
				
							</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #content-wrapper -->
</div><!-- #page -->

<!--  -->
<script src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/gprofiles.js.download" id="grofiles-cards-js"></script>
<script id="wpgroho-js-extra">
var WPGroHo = {"my_hash":""};
</script>
<script type="text/javascript" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/wpgroho.js.download"></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-61df8d728c699c39c4c73507da598712">
	</div>
	<div class="grofile-hash-map-cac78178b3b10f2d64a62d1e69d0f188">
	</div>
	<div class="grofile-hash-map-61df8d728c699c39c4c73507da598712">
	</div>
	<div class="grofile-hash-map-5379a594d6a4b0e236bee44e77d29c95">
	</div>
	<div class="grofile-hash-map-4012cb8a467eccb07fc5e1df1160d062">
	</div>
	</div>
<script id="highlander-comments-js-extra">
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"Posting Comment\u2026","postCommentText":"Post Comment","connectingToText":"Connecting to %s","commentingAsText":"%1$s: You are commenting using your %2$s account.","logoutText":"Log Out","loginText":"Log In","connectURL":"https:\/\/davmac.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"https:\/\/davmac.wordpress.com\/wp-login.php?action=logout&_wpnonce=87249e426e","homeURL":"https:\/\/davmac.wordpress.com\/","postID":"2577","gravDefault":"identicon","enterACommentError":"Please enter a comment","enterEmailError":"Please enter your email address here","invalidEmailError":"Invalid email address","enterAuthorError":"Please enter your name here","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"Change","changeAccount":"Change Account","comment_registration":"","userIsLoggedIn":"","isJetpack":"","text_direction":"ltr"};
</script>
<script type="text/javascript" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/saved_resource(5)"></script>
		<!-- CCPA [start] -->
		<script type="text/javascript">
			( function () {

				var setupPrivacy = function() {

					document.addEventListener( 'DOMContentLoaded', function() {

						// Minimal Mozilla Cookie library
						// https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie/Simple_document.cookie_framework
						var cookieLib = window.cookieLib = {getItem:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,o,n,t,r,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var c="";if(n)switch(n.constructor){case Number:c=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:c="; expires="+n;break;case Date:c="; expires="+n.toUTCString()}return"rootDomain"!==r&&".rootDomain"!==r||(r=(".rootDomain"===r?".":"")+document.location.hostname.split(".").slice(-2).join(".")),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(o)+c+(r?"; domain="+r:"")+(t?"; path="+t:"")+(i?"; secure":""),!0}};

						var setDefaultOptInCookie = function() {
							var value = '1YNN';
							var domain = '.wordpress.com' === location.hostname.slice( -14 ) ? '.rootDomain' : location.hostname;
							cookieLib.setItem( 'usprivacy', value, 365 * 24 * 60 * 60, '/', domain );
						};

						var setCcpaAppliesCookie = function( value ) {
							var domain = '.wordpress.com' === location.hostname.slice( -14 ) ? '.rootDomain' : location.hostname;
							cookieLib.setItem( 'ccpa_applies', value, 24 * 60 * 60, '/', domain );
						}

						var maybeCallDoNotSellCallback = function() {
							if ( 'function' === typeof window.doNotSellCallback ) {
								return window.doNotSellCallback();
							}

							return false;
						}

						var usprivacyCookie = cookieLib.getItem( 'usprivacy' );

						if ( null !== usprivacyCookie ) {
							maybeCallDoNotSellCallback();
							return;
						}

						var ccpaCookie = cookieLib.getItem( 'ccpa_applies' );

						if ( null === ccpaCookie ) {

							var request = new XMLHttpRequest();
							request.open( 'GET', 'https://public-api.wordpress.com/geo/', true );

							request.onreadystatechange = function () {
								if ( 4 === this.readyState ) {
									if ( 200 === this.status ) {

										var data = JSON.parse( this.response );
										var ccpa_applies = data['region'] && data['region'].toLowerCase() === 'california';

										setCcpaAppliesCookie( ccpa_applies );

										if ( ccpa_applies ) {
											if ( maybeCallDoNotSellCallback() ) {
												setDefaultOptInCookie();
											}
										}
									} else {
										setCcpaAppliesCookie( true );
										if ( maybeCallDoNotSellCallback() ) {
											setDefaultOptInCookie();
										}
									}
								}
							};

							request.send();
						} else {
							if ( ccpaCookie === 'true' ) {
								if ( maybeCallDoNotSellCallback() ) {
									setDefaultOptInCookie();
								}
							}
						}
					} );
				};

				if ( window.defQueue && defQueue.isLOHP && defQueue.isLOHP === 2020 ) {
					defQueue.items.push( setupPrivacy );
				} else {
					setupPrivacy();
				}

			} )();
		</script>

		<!-- CCPA [end] -->
					<script type="text/javascript">
			( function( $ ) {
				$( document.body ).on( 'post-load', function () {
					if ( typeof __ATA.insertInlineAds === 'function' ) {
						__ATA.insertInlineAds();
					}
				} );
			} )( jQuery );
			</script>
	<div id="carousel-reblog-box">
		<form action="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#" name="carousel-reblog">
			<textarea id="carousel-reblog-content" name="carousel-reblog-content" placeholder="Add your thoughts here... (optional)"></textarea>
			<label for="carousel-reblog-to-blog-id" id="carousel-reblog-lblogid">Post to</label>
			<select name="carousel-reblog-to-blog-id" id="carousel-reblog-to-blog-id">
						</select>

			<div class="submit">
				<span class="canceltext"><a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/#" class="cancel">Cancel</a></span>
				<input type="submit" name="carousel-reblog-submit" class="button" id="carousel-reblog-submit" value="Reblog Post">
				<input type="hidden" id="carousel-reblog-blog-id" value="699263">
				<input type="hidden" id="carousel-reblog-blog-url" value="https://davmac.wordpress.com">
				<input type="hidden" id="carousel-reblog-blog-title" value="Software is Crap">
				<input type="hidden" id="carousel-reblog-post-url" value="">
				<input type="hidden" id="carousel-reblog-post-title" value="">
			</div>

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="2b03d558cd"><input type="hidden" name="_wp_http_referer" value="/2018/04/03/understanding-the-c-c-memory-model-part-2/?relatedposts_hit=1&amp;relatedposts_origin=2560&amp;relatedposts_position=0">		</form>

		<div class="arrow"></div>
	</div>

	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"https:\/\/davmac.wordpress.com\/2018\/04\/03\/understanding-the-c-c-memory-model-part-2\/":2577};
	</script>
				<link rel="stylesheet" id="all-css-0-3" href="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/jetpack-carousel.css" type="text/css" media="all">
<script id="wpcom-actionbar-bar-js-extra">
var actionbardata = {"siteID":"699263","siteName":"Software is Crap","siteURL":"http:\/\/davmac.wordpress.com","icon":"<img alt='' src='https:\/\/s0.wp.com\/i\/logo\/wpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/independent-publisher-2","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/wordpress.com\/log-in?redirect_to=https%3A%2F%2Fdavmac.wordpress.com%2F2018%2F04%2F03%2Funderstanding-the-c-c-memory-model-part-2%2F&signup_flow=account","themeURL":"https:\/\/wordpress.com\/theme\/independent-publisher-2\/","xhrURL":"https:\/\/davmac.wordpress.com\/wp-admin\/admin-ajax.php","nonce":"688de69686","isSingular":"1","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"48aa32594e\" \/>","referer":"https:\/\/davmac.wordpress.com\/2018\/04\/03\/understanding-the-c-c-memory-model-part-2\/?relatedposts_hit=1&relatedposts_origin=2560&relatedposts_position=0","canFollow":"1","feedID":"50598993","statusMessage":"","customizeLink":"https:\/\/davmac.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fdavmac.wordpress.com%2F2018%2F04%2F03%2Funderstanding-the-c-c-memory-model-part-2%2F%3Frelatedposts_hit%3D1%26relatedposts_origin%3D2560%26relatedposts_position%3D0","postID":"2577","shortlink":"https:\/\/wp.me\/p2VUr-Fz","canEditPost":"","editLink":"https:\/\/wordpress.com\/post\/davmac.wordpress.com\/2577","statsLink":"https:\/\/wordpress.com\/stats\/post\/2577\/davmac.wordpress.com","i18n":{"view":"View site","follow":"Follow","following":"Following","edit":"Edit","login":"Log in","signup":"Sign up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: Independent Publisher 2","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/read\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editSubs":"Manage subscriptions","viewReader":"View site in Reader","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/wordpress.com\/log-in?redirect_to=https%3A%2F%2Fdavmac.wordpress.com%2F2018%2F04%2F03%2Funderstanding-the-c-c-memory-model-part-2%2F&signup_flow=account\">Log in now.<\/a>","stats":"Stats"}};
</script>
<script id="jetpack-carousel-js-extra">
var jetpackCarouselStrings = {"widths":[370,700,1000,1200,1400,2000],"is_logged_in":"","lang":"en","ajaxurl":"https:\/\/davmac.wordpress.com\/wp-admin\/admin-ajax.php","nonce":"04df91c2de","display_exif":"1","display_comments":"1","display_geo":"1","single_image_gallery":"1","single_image_gallery_media_file":"","background_color":"black","comment":"Comment","post_comment":"Post Comment","write_comment":"Write a Comment...","loading_comments":"Loading Comments...","download_original":"View full size <span class=\"photo-size\">{0}<span class=\"photo-size-times\">\u00d7<\/span>{1}<\/span>","no_comment_text":"Please be sure to submit some text with your comment.","no_comment_email":"Please provide an email address to comment.","no_comment_author":"Please provide your name to comment.","comment_post_error":"Sorry, but there was an error posting your comment. Please try again later.","comment_approved":"Your comment was approved.","comment_unapproved":"Your comment is in moderation.","camera":"Camera","aperture":"Aperture","shutter_speed":"Shutter Speed","focal_length":"Focal Length","copyright":"Copyright","comment_registration":"0","require_name_email":"1","login_url":"https:\/\/davmac.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fdavmac.wordpress.com%2F2018%2F04%2F03%2Funderstanding-the-c-c-memory-model-part-2%2F","blog_id":"699263","meta_data":["camera","aperture","shutter_speed","focal_length","copyright"],"local_comments_commenting_as":"<fieldset><label for=\"email\">Email (Required)<\/label> <input type=\"text\" name=\"email\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-email-field\" \/><\/fieldset><fieldset><label for=\"author\">Name (Required)<\/label> <input type=\"text\" name=\"author\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-author-field\" \/><\/fieldset><fieldset><label for=\"url\">Website<\/label> <input type=\"text\" name=\"url\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-url-field\" \/><\/fieldset>","reblog":"Reblog","reblogged":"Reblogged","reblog_add_thoughts":"Add your thoughts here... (optional)","reblogging":"Reblogging...","post_reblog":"Post Reblog","stats_query_args":"blog=699263&v=wpcom&tz=10&user_id=0&subd=davmac","is_public":"1","reblog_enabled":""};
</script>
<script id="sharing-js-js-extra">
var sharing_js_options = {"lang":"en","counts":"1","is_stats_active":"1"};
</script>
<script type="text/javascript" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/saved_resource(6)"></script><div class="widget widget_eu_cookie_law_widget" style="display: block;"><div class="hide-on-button ads-active" data-hide-timeout="30" data-consent-expiration="180" id="eu-cookie-law">
	<form method="post">
		<input type="submit" value="Close and accept" class="accept">

		Privacy &amp; Cookies: This site uses cookies. By continuing to use this website, you agree to their use. <br>
To find out more, including how to control cookies, see here:
		<a href="https://automattic.com/cookies">
			Cookie Policy		</a>
 </form>
</div>
</div><div id="actionbar" class="actnbr-pub-independent-publisher-2 actnbr-has-follow actnbr-hidden"><ul><li class="actnbr-btn actnbr-hidden"> 			    	<a class="actnbr-action actnbr-actn-follow" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/"><svg class="gridicon gridicon__follow" height="24px" width="24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M23 16v2h-3v3h-2v-3h-3v-2h3v-3h2v3h3zM20 2v9h-4v3h-3v4H4c-1.1 0-2-.9-2-2V2h18zM8 13v-1H4v1h4zm3-3H4v1h7v-1zm0-2H4v1h7V8zm7-4H4v2h14V4z"></path></g></svg><span>Follow</span></a> 			    	<div class="actnbr-popover tip tip-top-left actnbr-notice"> 			    		<div class="tip-arrow"></div> 			    		<div class="tip-inner actnbr-follow-bubble"></div> 			    	</div> 			    </li><li class="actnbr-ellipsis actnbr-hidden"> 			  <svg class="gridicon gridicon__ellipsis" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><circle cx="5" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="12" cy="12" r="2"></circle></g></svg> 			  <div class="actnbr-popover tip tip-top-left actnbr-more"> 			  	<div class="tip-arrow"></div> 			  	<div class="tip-inner"> 				  <ul> 				    <li class="actnbr-sitename actnbr-hidden"><a href="http://davmac.wordpress.com/"><img alt="" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/wpcom-gray-white.png" class="avatar avatar-50" height="50" width="50"> Software is Crap</a></li> 				   	<li class="actnbr-folded-customize actnbr-hidden"><a href="https://davmac.wordpress.com/wp-admin/customize.php?url=https%3A%2F%2Fdavmac.wordpress.com%2F2018%2F04%2F03%2Funderstanding-the-c-c-memory-model-part-2%2F%3Frelatedposts_hit%3D1%26relatedposts_origin%3D2560%26relatedposts_position%3D0"><svg class="gridicon gridicon__customize" height="20px" width="20px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M2 6c0-1.505.78-3.08 2-4 0 .845.69 2 2 2 1.657 0 3 1.343 3 3 0 .386-.08.752-.212 1.09.74.594 1.476 1.19 2.19 1.81L8.9 11.98c-.62-.716-1.214-1.454-1.807-2.192C6.753 9.92 6.387 10 6 10c-2.21 0-4-1.79-4-4zm12.152 6.848l1.34-1.34c.607.304 1.283.492 2.008.492 2.485 0 4.5-2.015 4.5-4.5 0-.725-.188-1.4-.493-2.007L18 9l-2-2 3.507-3.507C18.9 3.188 18.225 3 17.5 3 15.015 3 13 5.015 13 7.5c0 .725.188 1.4.493 2.007L3 20l2 2 6.848-6.848c1.885 1.928 3.874 3.753 5.977 5.45l1.425 1.148 1.5-1.5-1.15-1.425c-1.695-2.103-3.52-4.092-5.448-5.977z" data-reactid=".2.1.1:0.1b.0"></path></g></svg><span>Customize<span></span></span></a></li> 				    <li class="actnbr-folded-follow actnbr-hidden"><a class="actnbr-action actnbr-actn-follow" href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/"><svg class="gridicon gridicon__follow" height="24px" width="24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M23 16v2h-3v3h-2v-3h-3v-2h3v-3h2v3h3zM20 2v9h-4v3h-3v4H4c-1.1 0-2-.9-2-2V2h18zM8 13v-1H4v1h4zm3-3H4v1h7v-1zm0-2H4v1h7V8zm7-4H4v2h14V4z"></path></g></svg><span>Follow</span></a></li> 					<li class="actnbr-signup actnbr-hidden"><a href="https://wordpress.com/start/">Sign up</a></li> 				    <li class="actnbr-login actnbr-hidden"><a href="https://wordpress.com/log-in?redirect_to=https%3A%2F%2Fdavmac.wordpress.com%2F2018%2F04%2F03%2Funderstanding-the-c-c-memory-model-part-2%2F&amp;signup_flow=account">Log in</a></li> 				     				    <li class="actnbr-shortlink actnbr-hidden"><a href="https://wp.me/p2VUr-Fz">Copy shortlink</a></li> 				    <li class="flb-report actnbr-hidden"><a href="http://en.wordpress.com/abuse/">Report this content</a></li> 				     				     				    <li class="actnbr-subs actnbr-hidden"><a href="https://subscribe.wordpress.com/">Manage subscriptions</a></li> 				    <li class="actnbr-fold actnbr-hidden"><a href="https://davmac.wordpress.com/2018/04/03/understanding-the-c-c-memory-model-part-2/">Collapse this bar</a></li> 			      </ul> 			    </div> 		      </div> 		    </li> 	      </ul></div>
<script type="text/javascript">
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-twitter', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-facebook', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
</script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script>		<iframe src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/master.html" scrolling="no" id="likes-master" name="likes-master" style="display:none;"></iframe>
		<div id="likes-other-gravatars"><div class="likes-text"><span>%d</span> bloggers like this:</div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
<script src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/w.js.download" type="text/javascript" async="" defer=""></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'699263','blog_tz':'10','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'699263','v':'wpcom','tz':'10','user_id':'0','post':'2577','subd':'davmac'}]);
_stq.push(['extra', {'crypt':'UE5XaGUuOTlwaD85flAmcm1mcmZsaDhkV11YdWFnNncxc1tjZG9XVXhRPWclXz01bj9hWHM1TlNrV0JuMk9GR29qOXJiRUN0MnUlY2t6XWRwWiYmcnkwR3ZHMiU1TG9YX2xRUU8yQWlqaHpDfjNFZUZUK3dbZi41LWMxbTllNmVXZENQRXQ1U1JNYV9OfisudHMvN35obUhFd1JmRUJvNHpad1FOU21ENiVfSG14NjJWLVlbOU52eUhJTkxobXRHdWpdbWNCaDlQUjR3LnZbenpUM3w4JUgzQ2Z8dHImY0xJaFU1TzA/XUUrc2FSbS5WLX4yS0hkbjBXakJFLl13WDJLYWgwJitrbGFIdHpDaVNdWUI0WCVEblc='}]);
_stq.push([ 'clickTrackerInit', '699263', '2577' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script>


<img src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/g.gif" alt=":)" id="wpstats"><iframe style="display: none" src="./Understanding the C_C++ memory model – part 2 – Software is Crap_files/user_sync.html"></iframe><div class="bottom-sticky__ad-container bottom-sticky__ad-container_hidden" id="bottom-sticky__ad-container" style="">
            <div class="bottom-sticky__ad-close-btn"></div>
            <div id="bottom-sticky-ad" style="margin:0 auto;width:728px;"></div>
        </div><style>.bottom-sticky__ad-container {
    background: #f1f1f1;
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    transform: translate(0,0);
    transition: transform .2s ease-in-out;
    user-select: none;
    padding-top: 10px;
    z-index: 49999;         /* AUTOMATTIC-2205 - because cookie consent banner has 50000 z-index */
}
.bottom-sticky__ad-container_hidden {
    visibility: hidden;
    transform: translate(0,1000px);
}
.bottom-sticky__ad-close-btn {
    width: 20px;
    height: 20px;
    position: absolute;
    box-sizing: content-box;
    border: 2px solid #9d9d9d;
    right: 2px;
    top: -14px;
    border-radius: 50%;
    background-color: #fff;
    cursor: pointer;
    overflow: hidden;
    background-size: 12px;
    background-repeat: no-repeat;
    background-position: center;
    background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke-width='4' stroke='%239d9d9d' d='M0 0l24 24M0 24L24 0'/%3E%3C/svg%3E");
}
.bottom-sticky__ad-container .adtags-button {
    color: #000;
}</style><style>.ata-controls__complain-btn:hover,
.ata-controls__privacy-btn:hover {
    color: #666666 !important;
}
.ata-controls__complain-btn:active,
.ata-controls__privacy-btn:active {
    color: #5ac8fa !important;
}
.ata-controls__complain-btn_clicked,
.ata-controls__complain-btn_clicked:hover,
.ata-controls__complain-btn_clicked:active {
    color: #000 !important;
    cursor: default !important;
}
.ata-frame-wrapper {
    overflow: hidden;
    position: relative;
}
</style><script src="https://s.skimresources.com/js/725X1342.skimlinks.js"></script></body></html>